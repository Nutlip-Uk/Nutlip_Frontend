import{w as ns,y as Me,$ as Xr,a0 as po,a9 as Oe,z as Kt,aa as go,ab as mo,ac as vo,ad as yo,ae as wo,af as bo,ag as Mo,ah as xo,_ as Tr,J as fn,p as zt,ai as Bi,P as Xn,a7 as Yn,aj as Yr,ak as bn}from"./index-GxelU0FC.js";import{w as _o,S as So,u as Ut,v as ko,d as Ao,e as Ke,f as Tn,n as Ii,g as Eo,h as Bo,i as Ri,m as Te,F as Io,r as Ro,j as To,k as Co,p as ke,l as Po,o as Lo,s as is,q as Ti,B as Qn,t as ti,x as Oo}from"./baseProvider.esm-B_humdmJ.js";import{n as No}from"./nacl-fast-aXOtqjRN.js";const[qo,Uo]=Ut.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(o=>BigInt(o))),De=new Uint32Array(80),ze=new Uint32Array(80);class Fo extends So{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:a,Ch:i,Cl:u,Dh:v,Dl:w,Eh:M,El:b,Fh:A,Fl:L,Gh:k,Gl:E,Hh:B,Hl:_}=this;return[t,e,r,a,i,u,v,w,M,b,A,L,k,E,B,_]}set(t,e,r,a,i,u,v,w,M,b,A,L,k,E,B,_){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=a|0,this.Ch=i|0,this.Cl=u|0,this.Dh=v|0,this.Dl=w|0,this.Eh=M|0,this.El=b|0,this.Fh=A|0,this.Fl=L|0,this.Gh=k|0,this.Gl=E|0,this.Hh=B|0,this.Hl=_|0}process(t,e){for(let C=0;C<16;C++,e+=4)De[C]=t.getUint32(e),ze[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){const N=De[C-15]|0,U=ze[C-15]|0,P=Ut.rotrSH(N,U,1)^Ut.rotrSH(N,U,8)^Ut.shrSH(N,U,7),G=Ut.rotrSL(N,U,1)^Ut.rotrSL(N,U,8)^Ut.shrSL(N,U,7),z=De[C-2]|0,Q=ze[C-2]|0,Wt=Ut.rotrSH(z,Q,19)^Ut.rotrBH(z,Q,61)^Ut.shrSH(z,Q,6),V=Ut.rotrSL(z,Q,19)^Ut.rotrBL(z,Q,61)^Ut.shrSL(z,Q,6),Vt=Ut.add4L(G,V,ze[C-7],ze[C-16]),g=Ut.add4H(Vt,P,Wt,De[C-7],De[C-16]);De[C]=g|0,ze[C]=Vt|0}let{Ah:r,Al:a,Bh:i,Bl:u,Ch:v,Cl:w,Dh:M,Dl:b,Eh:A,El:L,Fh:k,Fl:E,Gh:B,Gl:_,Hh:q,Hl:K}=this;for(let C=0;C<80;C++){const N=Ut.rotrSH(A,L,14)^Ut.rotrSH(A,L,18)^Ut.rotrBH(A,L,41),U=Ut.rotrSL(A,L,14)^Ut.rotrSL(A,L,18)^Ut.rotrBL(A,L,41),P=A&k^~A&B,G=L&E^~L&_,z=Ut.add5L(K,U,G,Uo[C],ze[C]),Q=Ut.add5H(z,q,N,P,qo[C],De[C]),Wt=z|0,V=Ut.rotrSH(r,a,28)^Ut.rotrBH(r,a,34)^Ut.rotrBH(r,a,39),Vt=Ut.rotrSL(r,a,28)^Ut.rotrBL(r,a,34)^Ut.rotrBL(r,a,39),g=r&i^r&v^i&v,n=a&u^a&w^u&w;q=B|0,K=_|0,B=k|0,_=E|0,k=A|0,E=L|0,{h:A,l:L}=Ut.add(M|0,b|0,Q|0,Wt|0),M=v|0,b=w|0,v=i|0,w=u|0,i=r|0,u=a|0;const c=Ut.add3L(Wt,Vt,n);r=Ut.add3H(c,Q,V,g),a=c|0}({h:r,l:a}=Ut.add(this.Ah|0,this.Al|0,r|0,a|0)),{h:i,l:u}=Ut.add(this.Bh|0,this.Bl|0,i|0,u|0),{h:v,l:w}=Ut.add(this.Ch|0,this.Cl|0,v|0,w|0),{h:M,l:b}=Ut.add(this.Dh|0,this.Dl|0,M|0,b|0),{h:A,l:L}=Ut.add(this.Eh|0,this.El|0,A|0,L|0),{h:k,l:E}=Ut.add(this.Fh|0,this.Fl|0,k|0,E|0),{h:B,l:_}=Ut.add(this.Gh|0,this.Gl|0,B|0,_|0),{h:q,l:K}=Ut.add(this.Hh|0,this.Hl|0,q|0,K|0),this.set(r,a,i,u,v,w,M,b,A,L,k,E,B,_,q,K)}roundClean(){De.fill(0),ze.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ss=_o(()=>new Fo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xe=BigInt(0),pe=BigInt(1),sn=BigInt(2),Ko=BigInt(8),Do={zip215:!0};function zo(o){const t=ko(o);return Ao(o,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function ei(o){const t=zo(o),{Fp:e,n:r,prehash:a,hash:i,randomBytes:u,nByteLength:v,h:w}=t,M=sn<<BigInt(v*8)-pe,b=e.create,A=t.uvRatio||((d,m)=>{try{return{isValid:!0,value:e.sqrt(d*e.inv(m))}}catch{return{isValid:!1,value:xe}}}),L=t.adjustScalarBytes||(d=>d),k=t.domain||((d,m,y)=>{if(m.length||y)throw new Error("Contexts/pre-hash are not supported");return d}),E=d=>typeof d=="bigint"&&xe<d,B=(d,m)=>E(d)&&E(m)&&d<m,_=d=>d===xe||B(d,M);function q(d,m){if(B(d,m))return d;throw new Error(`Expected valid scalar < ${m}, got ${typeof d} ${d}`)}function K(d){return d===xe?d:q(d,r)}const C=new Map;function N(d){if(!(d instanceof U))throw new Error("ExtendedPoint expected")}class U{constructor(m,y,f,s){if(this.ex=m,this.ey=y,this.ez=f,this.et=s,!_(m))throw new Error("x required");if(!_(y))throw new Error("y required");if(!_(f))throw new Error("z required");if(!_(s))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof U)throw new Error("extended point not allowed");const{x:y,y:f}=m||{};if(!_(y)||!_(f))throw new Error("invalid affine point");return new U(y,f,pe,b(y*f))}static normalizeZ(m){const y=e.invertBatch(m.map(f=>f.ez));return m.map((f,s)=>f.toAffine(y[s])).map(U.fromAffine)}_setWindowSize(m){this._WINDOW_SIZE=m,C.delete(this)}assertValidity(){const{a:m,d:y}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:f,ey:s,ez:l,et:I}=this,R=b(f*f),T=b(s*s),X=b(l*l),W=b(X*X),j=b(R*m),ie=b(X*b(j+T)),Y=b(W+b(y*b(R*T)));if(ie!==Y)throw new Error("bad point: equation left != right (1)");const rt=b(f*s),ue=b(l*I);if(rt!==ue)throw new Error("bad point: equation left != right (2)")}equals(m){N(m);const{ex:y,ey:f,ez:s}=this,{ex:l,ey:I,ez:R}=m,T=b(y*R),X=b(l*s),W=b(f*R),j=b(I*s);return T===X&&W===j}is0(){return this.equals(U.ZERO)}negate(){return new U(b(-this.ex),this.ey,this.ez,b(-this.et))}double(){const{a:m}=t,{ex:y,ey:f,ez:s}=this,l=b(y*y),I=b(f*f),R=b(sn*b(s*s)),T=b(m*l),X=y+f,W=b(b(X*X)-l-I),j=T+I,ie=j-R,Y=T-I,rt=b(W*ie),ue=b(j*Y),it=b(W*Y),st=b(ie*j);return new U(rt,ue,st,it)}add(m){N(m);const{a:y,d:f}=t,{ex:s,ey:l,ez:I,et:R}=this,{ex:T,ey:X,ez:W,et:j}=m;if(y===BigInt(-1)){const qe=b((l-s)*(X+T)),ct=b((l+s)*(X-T)),ot=b(ct-qe);if(ot===xe)return this.double();const Ue=b(I*sn*j),ut=b(R*sn*W),ht=ut+Ue,Fe=ct+qe,ft=ut-Ue,gt=b(ht*ot),Je=b(Fe*ft),mt=b(ht*ft),vt=b(ot*Fe);return new U(gt,Je,vt,mt)}const ie=b(s*T),Y=b(l*X),rt=b(R*f*j),ue=b(I*W),it=b((s+l)*(T+X)-ie-Y),st=ue-rt,Ne=ue+rt,at=b(Y-y*ie),lt=b(it*st),Ze=b(Ne*at),dt=b(it*at),pt=b(st*Ne);return new U(lt,Ze,pt,dt)}subtract(m){return this.add(m.negate())}wNAF(m){return z.wNAFCached(this,C,m,U.normalizeZ)}multiply(m){const{p:y,f}=this.wNAF(q(m,r));return U.normalizeZ([y,f])[0]}multiplyUnsafe(m){let y=K(m);return y===xe?G:this.equals(G)||y===pe?this:this.equals(P)?this.wNAF(y).p:z.unsafeLadder(this,y)}isSmallOrder(){return this.multiplyUnsafe(w).is0()}isTorsionFree(){return z.unsafeLadder(this,r).is0()}toAffine(m){const{ex:y,ey:f,ez:s}=this,l=this.is0();m==null&&(m=l?Ko:e.inv(s));const I=b(y*m),R=b(f*m),T=b(s*m);if(l)return{x:xe,y:pe};if(T!==pe)throw new Error("invZ was invalid");return{x:I,y:R}}clearCofactor(){const{h:m}=t;return m===pe?this:this.multiplyUnsafe(m)}static fromHex(m,y=!1){const{d:f,a:s}=t,l=e.BYTES;m=Ke("pointHex",m,l);const I=m.slice(),R=m[l-1];I[l-1]=R&-129;const T=Tn(I);T===xe||(y?q(T,M):q(T,e.ORDER));const X=b(T*T),W=b(X-pe),j=b(f*X-s);let{isValid:ie,value:Y}=A(W,j);if(!ie)throw new Error("Point.fromHex: invalid y coordinate");const rt=(Y&pe)===pe,ue=(R&128)!==0;if(!y&&Y===xe&&ue)throw new Error("Point.fromHex: x=0 and x_0=1");return ue!==rt&&(Y=b(-Y)),U.fromAffine({x:Y,y:T})}static fromPrivateKey(m){return V(m).point}toRawBytes(){const{x:m,y}=this.toAffine(),f=Ii(y,e.BYTES);return f[f.length-1]|=m&pe?128:0,f}toHex(){return Eo(this.toRawBytes())}}U.BASE=new U(t.Gx,t.Gy,pe,b(t.Gx*t.Gy)),U.ZERO=new U(xe,pe,pe,xe);const{BASE:P,ZERO:G}=U,z=Bo(U,v*8);function Q(d){return Te(d,r)}function Wt(d){return Q(Tn(d))}function V(d){const m=v;d=Ke("private key",d,m);const y=Ke("hashed private key",i(d),2*m),f=L(y.slice(0,m)),s=y.slice(m,2*m),l=Wt(f),I=P.multiply(l),R=I.toRawBytes();return{head:f,prefix:s,scalar:l,point:I,pointBytes:R}}function Vt(d){return V(d).pointBytes}function g(d=new Uint8Array,...m){const y=Ri(...m);return Wt(i(k(y,Ke("context",d),!!a)))}function n(d,m,y={}){d=Ke("message",d),a&&(d=a(d));const{prefix:f,scalar:s,pointBytes:l}=V(m),I=g(y.context,f,d),R=P.multiply(I).toRawBytes(),T=g(y.context,R,l,d),X=Q(I+T*s);K(X);const W=Ri(R,Ii(X,e.BYTES));return Ke("result",W,v*2)}const c=Do;function h(d,m,y,f=c){const{context:s,zip215:l}=f,I=e.BYTES;d=Ke("signature",d,2*I),m=Ke("message",m),a&&(m=a(m));const R=Tn(d.slice(I,2*I));let T,X,W;try{T=U.fromHex(y,l),X=U.fromHex(d.slice(0,I),l),W=P.multiplyUnsafe(R)}catch{return!1}if(!l&&T.isSmallOrder())return!1;const j=g(s,X.toRawBytes(),T.toRawBytes(),m);return X.add(T.multiplyUnsafe(j)).subtract(W).clearCofactor().equals(U.ZERO)}return P._setWindowSize(8),{CURVE:t,getPublicKey:Vt,sign:n,verify:h,ExtendedPoint:U,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>u(e.BYTES),precompute(d=8,m=U.BASE){return m._setWindowSize(d),m.multiply(BigInt(3)),m}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ri=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ci=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ho=BigInt(1),Hn=BigInt(2),$o=BigInt(5),Pi=BigInt(10),Wo=BigInt(20),Go=BigInt(40),Li=BigInt(80);function jo(o){const t=ri,r=o*o%t*o%t,a=ke(r,Hn,t)*r%t,i=ke(a,Ho,t)*o%t,u=ke(i,$o,t)*i%t,v=ke(u,Pi,t)*u%t,w=ke(v,Wo,t)*v%t,M=ke(w,Go,t)*w%t,b=ke(M,Li,t)*M%t,A=ke(b,Li,t)*M%t,L=ke(A,Pi,t)*u%t;return{pow_p_5_8:ke(L,Hn,t)*o%t,b2:r}}function Vo(o){return o[0]&=248,o[31]&=127,o[31]|=64,o}function Zo(o,t){const e=ri,r=Te(t*t*t,e),a=Te(r*r*t,e),i=jo(o*a).pow_p_5_8;let u=Te(o*r*i,e);const v=Te(t*u*u,e),w=u,M=Te(u*Ci,e),b=v===o,A=v===Te(-o,e),L=v===Te(-o*Ci,e);return b&&(u=w),(A||L)&&(u=M),Co(u,e)&&(u=Te(-u,e)),{isValid:b||A,value:u}}const Le=Io(ri,void 0,!0),ni={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Le,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ss,randomBytes:Ro,adjustScalarBytes:Vo,uvRatio:Zo},Qr=ei(ni);function os(o,t,e){if(t.length>255)throw new Error("Context is too big");return Po(Lo("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,o)}({...ni});({...ni});const Jo=(Le.ORDER+BigInt(3))/BigInt(8);Le.pow(Hn,Jo);Le.sqrt(Le.neg(Le.ONE));(Le.ORDER-BigInt(5))/BigInt(8);BigInt(486662);To(Le,Le.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ii={exports:{}};ii.exports;(function(o){(function(t,e){function r(g,n){if(!g)throw new Error(n||"Assertion failed")}function a(g,n){g.super_=n;var c=function(){};c.prototype=n.prototype,g.prototype=new c,g.prototype.constructor=g}function i(g,n,c){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(g||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=ns.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var p=0;n[0]==="-"&&(p++,this.negative=1),p<n.length&&(c===16?this._parseHex(n,p,h):(this._parseBase(n,c,p),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d,m,y=0;if(h==="be")for(p=n.length-1,d=0;p>=0;p-=3)m=n[p]|n[p-1]<<8|n[p-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(h==="le")for(p=0,d=0;p<n.length;p+=3)m=n[p]|n[p+1]<<8|n[p+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this._strip()};function v(g,n){var c=g.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+g)}function w(g,n,c){var h=v(g,c);return c-1>=n&&(h|=v(g,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d=0,m=0,y;if(h==="be")for(p=n.length-1;p>=c;p-=2)y=w(n,c,p)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var f=n.length-c;for(p=f%2===0?c+1:c;p<n.length;p+=2)y=w(n,c,p)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this._strip()};function M(g,n,c,h){for(var p=0,d=0,m=Math.min(g.length,c),y=n;y<m;y++){var f=g.charCodeAt(y)-48;p*=h,f>=49?d=f-49+10:f>=17?d=f-17+10:d=f,r(f>=0&&d<h,"Invalid character"),p+=d}return p}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var p=0,d=1;d<=67108863;d*=c)p++;p--,d=d/c|0;for(var m=n.length-h,y=m%p,f=Math.min(m,m-y)+h,s=0,l=h;l<f;l+=p)s=M(n,l,l+p,c),this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(y!==0){var I=1;for(s=M(n,l,n.length,c),l=0;l<y;l++)I*=c;this.imuln(I),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function b(g,n){g.words=n.words,g.length=n.length,g.negative=n.negative,g.red=n.red}if(i.prototype._move=function(n){b(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var p=0,d=0,m=0;m<this.length;m++){var y=this.words[m],f=((y<<p|d)&16777215).toString(16);d=y>>>24-p&16777215,p+=2,p>=26&&(p-=26,m--),d!==0||m!==this.length-1?h=L[6-f.length]+f+h:h=f+h}for(d!==0&&(h=d.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var s=k[n],l=E[n];h="";var I=this.clone();for(I.negative=0;!I.isZero();){var R=I.modrn(l).toString(n);I=I.idivn(l),I.isZero()?h=R+h:h=L[s-R.length]+R+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var B=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var p=this.byteLength(),d=h||Math.max(1,p);r(p<=d,"byte array longer than desired length"),r(d>0,"Requested array length <= 0");var m=B(n,d),y=c==="le"?"LE":"BE";return this["_toArrayLike"+y](m,p),m},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,p=0,d=0,m=0;d<this.length;d++){var y=this.words[d]<<m|p;n[h++]=y&255,h<n.length&&(n[h++]=y>>8&255),h<n.length&&(n[h++]=y>>16&255),m===6?(h<n.length&&(n[h++]=y>>24&255),p=0,m=0):(p=y>>>24,m+=2)}if(h<n.length)for(n[h++]=p;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,p=0,d=0,m=0;d<this.length;d++){var y=this.words[d]<<m|p;n[h--]=y&255,h>=0&&(n[h--]=y>>8&255),h>=0&&(n[h--]=y>>16&255),m===6?(h>=0&&(n[h--]=y>>24&255),p=0,m=0):(p=y>>>24,m+=2)}if(h>=0)for(n[h--]=p;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function _(g){for(var n=new Array(g.bitLength()),c=0;c<n.length;c++){var h=c/26|0,p=c%26;n[c]=g.words[h]>>>p&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var p=0;p<h.length;p++)this.words[p]=c.words[p]^h.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,p=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var d=0,m=0;m<p.length;m++)c=(h.words[m]|0)+(p.words[m]|0)+d,this.words[m]=c&67108863,d=c>>>26;for(;d!==0&&m<h.length;m++)c=(h.words[m]|0)+d,this.words[m]=c&67108863,d=c>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,d;h>0?(p=this,d=n):(p=n,d=this);for(var m=0,y=0;y<d.length;y++)c=(p.words[y]|0)-(d.words[y]|0)+m,m=c>>26,this.words[y]=c&67108863;for(;m!==0&&y<p.length;y++)c=(p.words[y]|0)+m,m=c>>26,this.words[y]=c&67108863;if(m===0&&y<p.length&&p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=Math.max(this.length,y),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function q(g,n,c){c.negative=n.negative^g.negative;var h=g.length+n.length|0;c.length=h,h=h-1|0;var p=g.words[0]|0,d=n.words[0]|0,m=p*d,y=m&67108863,f=m/67108864|0;c.words[0]=y;for(var s=1;s<h;s++){for(var l=f>>>26,I=f&67108863,R=Math.min(s,n.length-1),T=Math.max(0,s-g.length+1);T<=R;T++){var X=s-T|0;p=g.words[X]|0,d=n.words[T]|0,m=p*d+I,l+=m/67108864|0,I=m&67108863}c.words[s]=I|0,f=l|0}return f!==0?c.words[s]=f|0:c.length--,c._strip()}var K=function(n,c,h){var p=n.words,d=c.words,m=h.words,y=0,f,s,l,I=p[0]|0,R=I&8191,T=I>>>13,X=p[1]|0,W=X&8191,j=X>>>13,ie=p[2]|0,Y=ie&8191,rt=ie>>>13,ue=p[3]|0,it=ue&8191,st=ue>>>13,Ne=p[4]|0,at=Ne&8191,lt=Ne>>>13,Ze=p[5]|0,dt=Ze&8191,pt=Ze>>>13,qe=p[6]|0,ct=qe&8191,ot=qe>>>13,Ue=p[7]|0,ut=Ue&8191,ht=Ue>>>13,Fe=p[8]|0,ft=Fe&8191,gt=Fe>>>13,Je=p[9]|0,mt=Je&8191,vt=Je>>>13,Or=d[0]|0,yt=Or&8191,wt=Or>>>13,Nr=d[1]|0,bt=Nr&8191,Mt=Nr>>>13,qr=d[2]|0,xt=qr&8191,_t=qr>>>13,Ur=d[3]|0,St=Ur&8191,kt=Ur>>>13,Fr=d[4]|0,At=Fr&8191,Et=Fr>>>13,Kr=d[5]|0,Bt=Kr&8191,It=Kr>>>13,Dr=d[6]|0,Rt=Dr&8191,Tt=Dr>>>13,zr=d[7]|0,Ct=zr&8191,Pt=zr>>>13,Hr=d[8]|0,Lt=Hr&8191,Ot=Hr>>>13,$r=d[9]|0,Nt=$r&8191,qt=$r>>>13;h.negative=n.negative^c.negative,h.length=19,f=Math.imul(R,yt),s=Math.imul(R,wt),s=s+Math.imul(T,yt)|0,l=Math.imul(T,wt);var Xe=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,f=Math.imul(W,yt),s=Math.imul(W,wt),s=s+Math.imul(j,yt)|0,l=Math.imul(j,wt),f=f+Math.imul(R,bt)|0,s=s+Math.imul(R,Mt)|0,s=s+Math.imul(T,bt)|0,l=l+Math.imul(T,Mt)|0;var Ye=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,f=Math.imul(Y,yt),s=Math.imul(Y,wt),s=s+Math.imul(rt,yt)|0,l=Math.imul(rt,wt),f=f+Math.imul(W,bt)|0,s=s+Math.imul(W,Mt)|0,s=s+Math.imul(j,bt)|0,l=l+Math.imul(j,Mt)|0,f=f+Math.imul(R,xt)|0,s=s+Math.imul(R,_t)|0,s=s+Math.imul(T,xt)|0,l=l+Math.imul(T,_t)|0;var Qe=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,f=Math.imul(it,yt),s=Math.imul(it,wt),s=s+Math.imul(st,yt)|0,l=Math.imul(st,wt),f=f+Math.imul(Y,bt)|0,s=s+Math.imul(Y,Mt)|0,s=s+Math.imul(rt,bt)|0,l=l+Math.imul(rt,Mt)|0,f=f+Math.imul(W,xt)|0,s=s+Math.imul(W,_t)|0,s=s+Math.imul(j,xt)|0,l=l+Math.imul(j,_t)|0,f=f+Math.imul(R,St)|0,s=s+Math.imul(R,kt)|0,s=s+Math.imul(T,St)|0,l=l+Math.imul(T,kt)|0;var tr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,f=Math.imul(at,yt),s=Math.imul(at,wt),s=s+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),f=f+Math.imul(it,bt)|0,s=s+Math.imul(it,Mt)|0,s=s+Math.imul(st,bt)|0,l=l+Math.imul(st,Mt)|0,f=f+Math.imul(Y,xt)|0,s=s+Math.imul(Y,_t)|0,s=s+Math.imul(rt,xt)|0,l=l+Math.imul(rt,_t)|0,f=f+Math.imul(W,St)|0,s=s+Math.imul(W,kt)|0,s=s+Math.imul(j,St)|0,l=l+Math.imul(j,kt)|0,f=f+Math.imul(R,At)|0,s=s+Math.imul(R,Et)|0,s=s+Math.imul(T,At)|0,l=l+Math.imul(T,Et)|0;var er=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(er>>>26)|0,er&=67108863,f=Math.imul(dt,yt),s=Math.imul(dt,wt),s=s+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),f=f+Math.imul(at,bt)|0,s=s+Math.imul(at,Mt)|0,s=s+Math.imul(lt,bt)|0,l=l+Math.imul(lt,Mt)|0,f=f+Math.imul(it,xt)|0,s=s+Math.imul(it,_t)|0,s=s+Math.imul(st,xt)|0,l=l+Math.imul(st,_t)|0,f=f+Math.imul(Y,St)|0,s=s+Math.imul(Y,kt)|0,s=s+Math.imul(rt,St)|0,l=l+Math.imul(rt,kt)|0,f=f+Math.imul(W,At)|0,s=s+Math.imul(W,Et)|0,s=s+Math.imul(j,At)|0,l=l+Math.imul(j,Et)|0,f=f+Math.imul(R,Bt)|0,s=s+Math.imul(R,It)|0,s=s+Math.imul(T,Bt)|0,l=l+Math.imul(T,It)|0;var rr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,f=Math.imul(ct,yt),s=Math.imul(ct,wt),s=s+Math.imul(ot,yt)|0,l=Math.imul(ot,wt),f=f+Math.imul(dt,bt)|0,s=s+Math.imul(dt,Mt)|0,s=s+Math.imul(pt,bt)|0,l=l+Math.imul(pt,Mt)|0,f=f+Math.imul(at,xt)|0,s=s+Math.imul(at,_t)|0,s=s+Math.imul(lt,xt)|0,l=l+Math.imul(lt,_t)|0,f=f+Math.imul(it,St)|0,s=s+Math.imul(it,kt)|0,s=s+Math.imul(st,St)|0,l=l+Math.imul(st,kt)|0,f=f+Math.imul(Y,At)|0,s=s+Math.imul(Y,Et)|0,s=s+Math.imul(rt,At)|0,l=l+Math.imul(rt,Et)|0,f=f+Math.imul(W,Bt)|0,s=s+Math.imul(W,It)|0,s=s+Math.imul(j,Bt)|0,l=l+Math.imul(j,It)|0,f=f+Math.imul(R,Rt)|0,s=s+Math.imul(R,Tt)|0,s=s+Math.imul(T,Rt)|0,l=l+Math.imul(T,Tt)|0;var nr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,f=Math.imul(ut,yt),s=Math.imul(ut,wt),s=s+Math.imul(ht,yt)|0,l=Math.imul(ht,wt),f=f+Math.imul(ct,bt)|0,s=s+Math.imul(ct,Mt)|0,s=s+Math.imul(ot,bt)|0,l=l+Math.imul(ot,Mt)|0,f=f+Math.imul(dt,xt)|0,s=s+Math.imul(dt,_t)|0,s=s+Math.imul(pt,xt)|0,l=l+Math.imul(pt,_t)|0,f=f+Math.imul(at,St)|0,s=s+Math.imul(at,kt)|0,s=s+Math.imul(lt,St)|0,l=l+Math.imul(lt,kt)|0,f=f+Math.imul(it,At)|0,s=s+Math.imul(it,Et)|0,s=s+Math.imul(st,At)|0,l=l+Math.imul(st,Et)|0,f=f+Math.imul(Y,Bt)|0,s=s+Math.imul(Y,It)|0,s=s+Math.imul(rt,Bt)|0,l=l+Math.imul(rt,It)|0,f=f+Math.imul(W,Rt)|0,s=s+Math.imul(W,Tt)|0,s=s+Math.imul(j,Rt)|0,l=l+Math.imul(j,Tt)|0,f=f+Math.imul(R,Ct)|0,s=s+Math.imul(R,Pt)|0,s=s+Math.imul(T,Ct)|0,l=l+Math.imul(T,Pt)|0;var ir=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,f=Math.imul(ft,yt),s=Math.imul(ft,wt),s=s+Math.imul(gt,yt)|0,l=Math.imul(gt,wt),f=f+Math.imul(ut,bt)|0,s=s+Math.imul(ut,Mt)|0,s=s+Math.imul(ht,bt)|0,l=l+Math.imul(ht,Mt)|0,f=f+Math.imul(ct,xt)|0,s=s+Math.imul(ct,_t)|0,s=s+Math.imul(ot,xt)|0,l=l+Math.imul(ot,_t)|0,f=f+Math.imul(dt,St)|0,s=s+Math.imul(dt,kt)|0,s=s+Math.imul(pt,St)|0,l=l+Math.imul(pt,kt)|0,f=f+Math.imul(at,At)|0,s=s+Math.imul(at,Et)|0,s=s+Math.imul(lt,At)|0,l=l+Math.imul(lt,Et)|0,f=f+Math.imul(it,Bt)|0,s=s+Math.imul(it,It)|0,s=s+Math.imul(st,Bt)|0,l=l+Math.imul(st,It)|0,f=f+Math.imul(Y,Rt)|0,s=s+Math.imul(Y,Tt)|0,s=s+Math.imul(rt,Rt)|0,l=l+Math.imul(rt,Tt)|0,f=f+Math.imul(W,Ct)|0,s=s+Math.imul(W,Pt)|0,s=s+Math.imul(j,Ct)|0,l=l+Math.imul(j,Pt)|0,f=f+Math.imul(R,Lt)|0,s=s+Math.imul(R,Ot)|0,s=s+Math.imul(T,Lt)|0,l=l+Math.imul(T,Ot)|0;var sr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(sr>>>26)|0,sr&=67108863,f=Math.imul(mt,yt),s=Math.imul(mt,wt),s=s+Math.imul(vt,yt)|0,l=Math.imul(vt,wt),f=f+Math.imul(ft,bt)|0,s=s+Math.imul(ft,Mt)|0,s=s+Math.imul(gt,bt)|0,l=l+Math.imul(gt,Mt)|0,f=f+Math.imul(ut,xt)|0,s=s+Math.imul(ut,_t)|0,s=s+Math.imul(ht,xt)|0,l=l+Math.imul(ht,_t)|0,f=f+Math.imul(ct,St)|0,s=s+Math.imul(ct,kt)|0,s=s+Math.imul(ot,St)|0,l=l+Math.imul(ot,kt)|0,f=f+Math.imul(dt,At)|0,s=s+Math.imul(dt,Et)|0,s=s+Math.imul(pt,At)|0,l=l+Math.imul(pt,Et)|0,f=f+Math.imul(at,Bt)|0,s=s+Math.imul(at,It)|0,s=s+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,It)|0,f=f+Math.imul(it,Rt)|0,s=s+Math.imul(it,Tt)|0,s=s+Math.imul(st,Rt)|0,l=l+Math.imul(st,Tt)|0,f=f+Math.imul(Y,Ct)|0,s=s+Math.imul(Y,Pt)|0,s=s+Math.imul(rt,Ct)|0,l=l+Math.imul(rt,Pt)|0,f=f+Math.imul(W,Lt)|0,s=s+Math.imul(W,Ot)|0,s=s+Math.imul(j,Lt)|0,l=l+Math.imul(j,Ot)|0,f=f+Math.imul(R,Nt)|0,s=s+Math.imul(R,qt)|0,s=s+Math.imul(T,Nt)|0,l=l+Math.imul(T,qt)|0;var or=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(or>>>26)|0,or&=67108863,f=Math.imul(mt,bt),s=Math.imul(mt,Mt),s=s+Math.imul(vt,bt)|0,l=Math.imul(vt,Mt),f=f+Math.imul(ft,xt)|0,s=s+Math.imul(ft,_t)|0,s=s+Math.imul(gt,xt)|0,l=l+Math.imul(gt,_t)|0,f=f+Math.imul(ut,St)|0,s=s+Math.imul(ut,kt)|0,s=s+Math.imul(ht,St)|0,l=l+Math.imul(ht,kt)|0,f=f+Math.imul(ct,At)|0,s=s+Math.imul(ct,Et)|0,s=s+Math.imul(ot,At)|0,l=l+Math.imul(ot,Et)|0,f=f+Math.imul(dt,Bt)|0,s=s+Math.imul(dt,It)|0,s=s+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,It)|0,f=f+Math.imul(at,Rt)|0,s=s+Math.imul(at,Tt)|0,s=s+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,Tt)|0,f=f+Math.imul(it,Ct)|0,s=s+Math.imul(it,Pt)|0,s=s+Math.imul(st,Ct)|0,l=l+Math.imul(st,Pt)|0,f=f+Math.imul(Y,Lt)|0,s=s+Math.imul(Y,Ot)|0,s=s+Math.imul(rt,Lt)|0,l=l+Math.imul(rt,Ot)|0,f=f+Math.imul(W,Nt)|0,s=s+Math.imul(W,qt)|0,s=s+Math.imul(j,Nt)|0,l=l+Math.imul(j,qt)|0;var ar=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,f=Math.imul(mt,xt),s=Math.imul(mt,_t),s=s+Math.imul(vt,xt)|0,l=Math.imul(vt,_t),f=f+Math.imul(ft,St)|0,s=s+Math.imul(ft,kt)|0,s=s+Math.imul(gt,St)|0,l=l+Math.imul(gt,kt)|0,f=f+Math.imul(ut,At)|0,s=s+Math.imul(ut,Et)|0,s=s+Math.imul(ht,At)|0,l=l+Math.imul(ht,Et)|0,f=f+Math.imul(ct,Bt)|0,s=s+Math.imul(ct,It)|0,s=s+Math.imul(ot,Bt)|0,l=l+Math.imul(ot,It)|0,f=f+Math.imul(dt,Rt)|0,s=s+Math.imul(dt,Tt)|0,s=s+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,Tt)|0,f=f+Math.imul(at,Ct)|0,s=s+Math.imul(at,Pt)|0,s=s+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Pt)|0,f=f+Math.imul(it,Lt)|0,s=s+Math.imul(it,Ot)|0,s=s+Math.imul(st,Lt)|0,l=l+Math.imul(st,Ot)|0,f=f+Math.imul(Y,Nt)|0,s=s+Math.imul(Y,qt)|0,s=s+Math.imul(rt,Nt)|0,l=l+Math.imul(rt,qt)|0;var cr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,f=Math.imul(mt,St),s=Math.imul(mt,kt),s=s+Math.imul(vt,St)|0,l=Math.imul(vt,kt),f=f+Math.imul(ft,At)|0,s=s+Math.imul(ft,Et)|0,s=s+Math.imul(gt,At)|0,l=l+Math.imul(gt,Et)|0,f=f+Math.imul(ut,Bt)|0,s=s+Math.imul(ut,It)|0,s=s+Math.imul(ht,Bt)|0,l=l+Math.imul(ht,It)|0,f=f+Math.imul(ct,Rt)|0,s=s+Math.imul(ct,Tt)|0,s=s+Math.imul(ot,Rt)|0,l=l+Math.imul(ot,Tt)|0,f=f+Math.imul(dt,Ct)|0,s=s+Math.imul(dt,Pt)|0,s=s+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Pt)|0,f=f+Math.imul(at,Lt)|0,s=s+Math.imul(at,Ot)|0,s=s+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Ot)|0,f=f+Math.imul(it,Nt)|0,s=s+Math.imul(it,qt)|0,s=s+Math.imul(st,Nt)|0,l=l+Math.imul(st,qt)|0;var ur=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,f=Math.imul(mt,At),s=Math.imul(mt,Et),s=s+Math.imul(vt,At)|0,l=Math.imul(vt,Et),f=f+Math.imul(ft,Bt)|0,s=s+Math.imul(ft,It)|0,s=s+Math.imul(gt,Bt)|0,l=l+Math.imul(gt,It)|0,f=f+Math.imul(ut,Rt)|0,s=s+Math.imul(ut,Tt)|0,s=s+Math.imul(ht,Rt)|0,l=l+Math.imul(ht,Tt)|0,f=f+Math.imul(ct,Ct)|0,s=s+Math.imul(ct,Pt)|0,s=s+Math.imul(ot,Ct)|0,l=l+Math.imul(ot,Pt)|0,f=f+Math.imul(dt,Lt)|0,s=s+Math.imul(dt,Ot)|0,s=s+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Ot)|0,f=f+Math.imul(at,Nt)|0,s=s+Math.imul(at,qt)|0,s=s+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,qt)|0;var hr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,f=Math.imul(mt,Bt),s=Math.imul(mt,It),s=s+Math.imul(vt,Bt)|0,l=Math.imul(vt,It),f=f+Math.imul(ft,Rt)|0,s=s+Math.imul(ft,Tt)|0,s=s+Math.imul(gt,Rt)|0,l=l+Math.imul(gt,Tt)|0,f=f+Math.imul(ut,Ct)|0,s=s+Math.imul(ut,Pt)|0,s=s+Math.imul(ht,Ct)|0,l=l+Math.imul(ht,Pt)|0,f=f+Math.imul(ct,Lt)|0,s=s+Math.imul(ct,Ot)|0,s=s+Math.imul(ot,Lt)|0,l=l+Math.imul(ot,Ot)|0,f=f+Math.imul(dt,Nt)|0,s=s+Math.imul(dt,qt)|0,s=s+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,qt)|0;var fr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,f=Math.imul(mt,Rt),s=Math.imul(mt,Tt),s=s+Math.imul(vt,Rt)|0,l=Math.imul(vt,Tt),f=f+Math.imul(ft,Ct)|0,s=s+Math.imul(ft,Pt)|0,s=s+Math.imul(gt,Ct)|0,l=l+Math.imul(gt,Pt)|0,f=f+Math.imul(ut,Lt)|0,s=s+Math.imul(ut,Ot)|0,s=s+Math.imul(ht,Lt)|0,l=l+Math.imul(ht,Ot)|0,f=f+Math.imul(ct,Nt)|0,s=s+Math.imul(ct,qt)|0,s=s+Math.imul(ot,Nt)|0,l=l+Math.imul(ot,qt)|0;var lr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,f=Math.imul(mt,Ct),s=Math.imul(mt,Pt),s=s+Math.imul(vt,Ct)|0,l=Math.imul(vt,Pt),f=f+Math.imul(ft,Lt)|0,s=s+Math.imul(ft,Ot)|0,s=s+Math.imul(gt,Lt)|0,l=l+Math.imul(gt,Ot)|0,f=f+Math.imul(ut,Nt)|0,s=s+Math.imul(ut,qt)|0,s=s+Math.imul(ht,Nt)|0,l=l+Math.imul(ht,qt)|0;var dr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,f=Math.imul(mt,Lt),s=Math.imul(mt,Ot),s=s+Math.imul(vt,Lt)|0,l=Math.imul(vt,Ot),f=f+Math.imul(ft,Nt)|0,s=s+Math.imul(ft,qt)|0,s=s+Math.imul(gt,Nt)|0,l=l+Math.imul(gt,qt)|0;var pr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(pr>>>26)|0,pr&=67108863,f=Math.imul(mt,Nt),s=Math.imul(mt,qt),s=s+Math.imul(vt,Nt)|0,l=Math.imul(vt,qt);var gr=(y+f|0)+((s&8191)<<13)|0;return y=(l+(s>>>13)|0)+(gr>>>26)|0,gr&=67108863,m[0]=Xe,m[1]=Ye,m[2]=Qe,m[3]=tr,m[4]=er,m[5]=rr,m[6]=nr,m[7]=ir,m[8]=sr,m[9]=or,m[10]=ar,m[11]=cr,m[12]=ur,m[13]=hr,m[14]=fr,m[15]=lr,m[16]=dr,m[17]=pr,m[18]=gr,y!==0&&(m[19]=y,h.length++),h};Math.imul||(K=q);function C(g,n,c){c.negative=n.negative^g.negative,c.length=g.length+n.length;for(var h=0,p=0,d=0;d<c.length-1;d++){var m=p;p=0;for(var y=h&67108863,f=Math.min(d,n.length-1),s=Math.max(0,d-g.length+1);s<=f;s++){var l=d-s,I=g.words[l]|0,R=n.words[s]|0,T=I*R,X=T&67108863;m=m+(T/67108864|0)|0,X=X+y|0,y=X&67108863,m=m+(X>>>26)|0,p+=m>>>26,m&=67108863}c.words[d]=y,h=m,m=p}return h!==0?c.words[d]=h:c.length--,c._strip()}function N(g,n,c){return C(g,n,c)}i.prototype.mulTo=function(n,c){var h,p=this.length+n.length;return this.length===10&&n.length===10?h=K(this,n,c):p<63?h=q(this,n,c):p<1024?h=C(this,n,c):h=N(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),N(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,p=0;p<this.length;p++){var d=(this.words[p]|0)*n,m=(d&67108863)+(h&67108863);h>>=26,h+=d/67108864|0,h+=m>>>26,this.words[p]=m&67108863}return h!==0&&(this.words[p]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=_(n);if(c.length===0)return new i(1);for(var h=this,p=0;p<c.length&&c[p]===0;p++,h=h.sqr());if(++p<c.length)for(var d=h.sqr();p<c.length;p++,d=d.sqr())c[p]!==0&&(h=h.mul(d));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,p=67108863>>>26-c<<26-c,d;if(c!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&p,f=(this.words[d]|0)-y<<c;this.words[d]=f|m,m=y>>>26-c}m&&(this.words[d]=m,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var p;c?p=(c-c%26)/26:p=0;var d=n%26,m=Math.min((n-d)/26,this.length),y=67108863^67108863>>>d<<d,f=h;if(p-=m,p=Math.max(0,p),f){for(var s=0;s<m;s++)f.words[s]=this.words[s];f.length=m}if(m!==0)if(this.length>m)for(this.length-=m,s=0;s<this.length;s++)this.words[s]=this.words[s+m];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(l!==0||s>=p);s--){var I=this.words[s]|0;this.words[s]=l<<26-d|I>>>d,l=I&y}return f&&l!==0&&(f.words[f.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,p=1<<c;if(this.length<=h)return!1;var d=this.words[h];return!!(d&p)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var p=n.length+h,d;this._expand(p);var m,y=0;for(d=0;d<n.length;d++){m=(this.words[d+h]|0)+y;var f=(n.words[d]|0)*c;m-=f&67108863,y=(m>>26)-(f/67108864|0),this.words[d+h]=m&67108863}for(;d<this.length-h;d++)m=(this.words[d+h]|0)+y,y=m>>26,this.words[d+h]=m&67108863;if(y===0)return this._strip();for(r(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,p=this.clone(),d=n,m=d.words[d.length-1]|0,y=this._countBits(m);h=26-y,h!==0&&(d=d.ushln(h),p.iushln(h),m=d.words[d.length-1]|0);var f=p.length-d.length,s;if(c!=="mod"){s=new i(null),s.length=f+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var I=p.clone()._ishlnsubmul(d,1,f);I.negative===0&&(p=I,s&&(s.words[f]=1));for(var R=f-1;R>=0;R--){var T=(p.words[d.length+R]|0)*67108864+(p.words[d.length+R-1]|0);for(T=Math.min(T/m|0,67108863),p._ishlnsubmul(d,T,R);p.negative!==0;)T--,p.negative=0,p._ishlnsubmul(d,1,R),p.isZero()||(p.negative^=1);s&&(s.words[R]=T)}return s&&s._strip(),p._strip(),c!=="div"&&h!==0&&p.iushrn(h),{div:s||null,mod:p}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,d,m;return this.negative!==0&&n.negative===0?(m=this.neg().divmod(n,c),c!=="mod"&&(p=m.div.neg()),c!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.iadd(n)),{div:p,mod:d}):this.negative===0&&n.negative!==0?(m=this.divmod(n.neg(),c),c!=="mod"&&(p=m.div.neg()),{div:p,mod:m.mod}):this.negative&n.negative?(m=this.neg().divmod(n.neg(),c),c!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.isub(n)),{div:m.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,p=n.ushrn(1),d=n.andln(1),m=h.cmp(p);return m<0||d===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,p=0,d=this.length-1;d>=0;d--)p=(h*p+(this.words[d]|0))%n;return c?-p:p},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,p=this.length-1;p>=0;p--){var d=(this.words[p]|0)+h*67108864;this.words[p]=d/n|0,h=d%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var p=new i(1),d=new i(0),m=new i(0),y=new i(1),f=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++f;for(var s=h.clone(),l=c.clone();!c.isZero();){for(var I=0,R=1;!(c.words[0]&R)&&I<26;++I,R<<=1);if(I>0)for(c.iushrn(I);I-- >0;)(p.isOdd()||d.isOdd())&&(p.iadd(s),d.isub(l)),p.iushrn(1),d.iushrn(1);for(var T=0,X=1;!(h.words[0]&X)&&T<26;++T,X<<=1);if(T>0)for(h.iushrn(T);T-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(s),y.isub(l)),m.iushrn(1),y.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(m),d.isub(y)):(h.isub(c),m.isub(p),y.isub(d))}return{a:m,b:y,gcd:h.iushln(f)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var p=new i(1),d=new i(0),m=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var y=0,f=1;!(c.words[0]&f)&&y<26;++y,f<<=1);if(y>0)for(c.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(m),p.iushrn(1);for(var s=0,l=1;!(h.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(h.iushrn(s);s-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(d)):(h.isub(c),d.isub(p))}var I;return c.cmpn(1)===0?I=p:I=d,I.cmpn(0)<0&&I.iadd(n),I},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var p=0;c.isEven()&&h.isEven();p++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=c.cmp(h);if(d<0){var m=c;c=h,h=m}else if(d===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(p)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,p=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var d=p,m=h;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var p=this.words[0]|0;h=p===n?0:p<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,d=n.words[h]|0;if(p!==d){p<d?c=-1:p>d&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new V(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var U={k256:null,p224:null,p192:null,p25519:null};function P(g,n){this.name=g,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},P.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var p=h<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},P.prototype.split=function(n,c){n.iushrn(this.n,0,c)},P.prototype.imulK=function(n){return n.imul(this.k)};function G(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(G,P),G.prototype.split=function(n,c){for(var h=4194303,p=Math.min(n.length,9),d=0;d<p;d++)c.words[d]=n.words[d];if(c.length=p,n.length<=9){n.words[0]=0,n.length=1;return}var m=n.words[9];for(c.words[c.length++]=m&h,d=10;d<n.length;d++){var y=n.words[d]|0;n.words[d-10]=(y&h)<<4|m>>>22,m=y}m>>>=22,n.words[d-10]=m,m===0&&n.length>10?n.length-=10:n.length-=9},G.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var p=n.words[h]|0;c+=p*977,n.words[h]=c&67108863,c=p*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function z(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(z,P);function Q(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(Q,P);function Wt(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Wt,P),Wt.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var p=(n.words[h]|0)*19+c,d=p&67108863;p>>>=26,n.words[h]=d,c=p}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(U[n])return U[n];var c;if(n==="k256")c=new G;else if(n==="p224")c=new z;else if(n==="p192")c=new Q;else if(n==="p25519")c=new Wt;else throw new Error("Unknown prime "+n);return U[n]=c,c};function V(g){if(typeof g=="string"){var n=i._prime(g);this.m=n.p,this.prime=n}else r(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}V.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},V.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},V.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(b(n,n.umod(this.m)._forceRed(this)),n)},V.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},V.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},V.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},V.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},V.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},V.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},V.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},V.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},V.prototype.isqr=function(n){return this.imul(n,n.clone())},V.prototype.sqr=function(n){return this.mul(n,n)},V.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var p=this.m.subn(1),d=0;!p.isZero()&&p.andln(1)===0;)d++,p.iushrn(1);r(!p.isZero());var m=new i(1).toRed(this),y=m.redNeg(),f=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,f).cmp(y)!==0;)s.redIAdd(y);for(var l=this.pow(s,p),I=this.pow(n,p.addn(1).iushrn(1)),R=this.pow(n,p),T=d;R.cmp(m)!==0;){for(var X=R,W=0;X.cmp(m)!==0;W++)X=X.redSqr();r(W<T);var j=this.pow(l,new i(1).iushln(T-W-1));I=I.redMul(j),l=j.redSqr(),R=R.redMul(l),T=W}return I},V.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},V.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,p=new Array(1<<h);p[0]=new i(1).toRed(this),p[1]=n;for(var d=2;d<p.length;d++)p[d]=this.mul(p[d-1],n);var m=p[0],y=0,f=0,s=c.bitLength()%26;for(s===0&&(s=26),d=c.length-1;d>=0;d--){for(var l=c.words[d],I=s-1;I>=0;I--){var R=l>>I&1;if(m!==p[0]&&(m=this.sqr(m)),R===0&&y===0){f=0;continue}y<<=1,y|=R,f++,!(f!==h&&(d!==0||I!==0))&&(m=this.mul(m,p[y]),f=0,y=0)}s=26}return m},V.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},V.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new Vt(n)};function Vt(g){V.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Vt,V),Vt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Vt.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},Vt.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Vt.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Vt.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(o,Me)})(ii);var Xo=ii.exports;const Oi=Xr(Xo);var on=po.Buffer;function Yo(o){if(o.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<o.length;r++){var a=o.charAt(r),i=a.charCodeAt(0);if(t[i]!==255)throw new TypeError(a+" is ambiguous");t[i]=r}var u=o.length,v=o.charAt(0),w=Math.log(u)/Math.log(256),M=Math.log(256)/Math.log(u);function b(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=on.from(k)),!on.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var E=0,B=0,_=0,q=k.length;_!==q&&k[_]===0;)_++,E++;for(var K=(q-_)*M+1>>>0,C=new Uint8Array(K);_!==q;){for(var N=k[_],U=0,P=K-1;(N!==0||U<B)&&P!==-1;P--,U++)N+=256*C[P]>>>0,C[P]=N%u>>>0,N=N/u>>>0;if(N!==0)throw new Error("Non-zero carry");B=U,_++}for(var G=K-B;G!==K&&C[G]===0;)G++;for(var z=v.repeat(E);G<K;++G)z+=o.charAt(C[G]);return z}function A(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return on.alloc(0);for(var E=0,B=0,_=0;k[E]===v;)B++,E++;for(var q=(k.length-E)*w+1>>>0,K=new Uint8Array(q);k[E];){var C=t[k.charCodeAt(E)];if(C===255)return;for(var N=0,U=q-1;(C!==0||N<_)&&U!==-1;U--,N++)C+=u*K[U]>>>0,K[U]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");_=N,E++}for(var P=q-_;P!==q&&K[P]===0;)P++;var G=on.allocUnsafe(B+(q-P));G.fill(0,0,B);for(var z=B;P!==q;)G[z++]=K[P++];return G}function L(k){var E=A(k);if(E)return E;throw new Error("Non-base"+u+" character")}return{encode:b,decodeUnsafe:A,decode:L}}var Qo=Yo,ta=Qo,ea="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",as=ta(ea);const jt=Xr(as);var ne={},si={exports:{}};si.exports;(function(o){(function(t,e){function r(g,n){if(!g)throw new Error(n||"Assertion failed")}function a(g,n){g.super_=n;var c=function(){};c.prototype=n.prototype,g.prototype=new c,g.prototype.constructor=g}function i(g,n,c){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(g||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=ns.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var p=0;n[0]==="-"&&(p++,this.negative=1),p<n.length&&(c===16?this._parseHex(n,p,h):(this._parseBase(n,c,p),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d,m,y=0;if(h==="be")for(p=n.length-1,d=0;p>=0;p-=3)m=n[p]|n[p-1]<<8|n[p-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(h==="le")for(p=0,d=0;p<n.length;p+=3)m=n[p]|n[p+1]<<8|n[p+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this._strip()};function v(g,n){var c=g.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+g)}function w(g,n,c){var h=v(g,c);return c-1>=n&&(h|=v(g,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var d=0,m=0,y;if(h==="be")for(p=n.length-1;p>=c;p-=2)y=w(n,c,p)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var f=n.length-c;for(p=f%2===0?c+1:c;p<n.length;p+=2)y=w(n,c,p)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this._strip()};function M(g,n,c,h){for(var p=0,d=0,m=Math.min(g.length,c),y=n;y<m;y++){var f=g.charCodeAt(y)-48;p*=h,f>=49?d=f-49+10:f>=17?d=f-17+10:d=f,r(f>=0&&d<h,"Invalid character"),p+=d}return p}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var p=0,d=1;d<=67108863;d*=c)p++;p--,d=d/c|0;for(var m=n.length-h,y=m%p,f=Math.min(m,m-y)+h,s=0,l=h;l<f;l+=p)s=M(n,l,l+p,c),this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(y!==0){var I=1;for(s=M(n,l,n.length,c),l=0;l<y;l++)I*=c;this.imuln(I),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function b(g,n){g.words=n.words,g.length=n.length,g.negative=n.negative,g.red=n.red}if(i.prototype._move=function(n){b(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var p=0,d=0,m=0;m<this.length;m++){var y=this.words[m],f=((y<<p|d)&16777215).toString(16);d=y>>>24-p&16777215,p+=2,p>=26&&(p-=26,m--),d!==0||m!==this.length-1?h=L[6-f.length]+f+h:h=f+h}for(d!==0&&(h=d.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var s=k[n],l=E[n];h="";var I=this.clone();for(I.negative=0;!I.isZero();){var R=I.modrn(l).toString(n);I=I.idivn(l),I.isZero()?h=R+h:h=L[s-R.length]+R+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var B=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var p=this.byteLength(),d=h||Math.max(1,p);r(p<=d,"byte array longer than desired length"),r(d>0,"Requested array length <= 0");var m=B(n,d),y=c==="le"?"LE":"BE";return this["_toArrayLike"+y](m,p),m},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,p=0,d=0,m=0;d<this.length;d++){var y=this.words[d]<<m|p;n[h++]=y&255,h<n.length&&(n[h++]=y>>8&255),h<n.length&&(n[h++]=y>>16&255),m===6?(h<n.length&&(n[h++]=y>>24&255),p=0,m=0):(p=y>>>24,m+=2)}if(h<n.length)for(n[h++]=p;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,p=0,d=0,m=0;d<this.length;d++){var y=this.words[d]<<m|p;n[h--]=y&255,h>=0&&(n[h--]=y>>8&255),h>=0&&(n[h--]=y>>16&255),m===6?(h>=0&&(n[h--]=y>>24&255),p=0,m=0):(p=y>>>24,m+=2)}if(h>=0)for(n[h--]=p;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function _(g){for(var n=new Array(g.bitLength()),c=0;c<n.length;c++){var h=c/26|0,p=c%26;n[c]=g.words[h]>>>p&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var p=0;p<h.length;p++)this.words[p]=c.words[p]^h.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,p=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var d=0,m=0;m<p.length;m++)c=(h.words[m]|0)+(p.words[m]|0)+d,this.words[m]=c&67108863,d=c>>>26;for(;d!==0&&m<h.length;m++)c=(h.words[m]|0)+d,this.words[m]=c&67108863,d=c>>>26;if(this.length=h.length,d!==0)this.words[this.length]=d,this.length++;else if(h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,d;h>0?(p=this,d=n):(p=n,d=this);for(var m=0,y=0;y<d.length;y++)c=(p.words[y]|0)-(d.words[y]|0)+m,m=c>>26,this.words[y]=c&67108863;for(;m!==0&&y<p.length;y++)c=(p.words[y]|0)+m,m=c>>26,this.words[y]=c&67108863;if(m===0&&y<p.length&&p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this.length=Math.max(this.length,y),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function q(g,n,c){c.negative=n.negative^g.negative;var h=g.length+n.length|0;c.length=h,h=h-1|0;var p=g.words[0]|0,d=n.words[0]|0,m=p*d,y=m&67108863,f=m/67108864|0;c.words[0]=y;for(var s=1;s<h;s++){for(var l=f>>>26,I=f&67108863,R=Math.min(s,n.length-1),T=Math.max(0,s-g.length+1);T<=R;T++){var X=s-T|0;p=g.words[X]|0,d=n.words[T]|0,m=p*d+I,l+=m/67108864|0,I=m&67108863}c.words[s]=I|0,f=l|0}return f!==0?c.words[s]=f|0:c.length--,c._strip()}var K=function(n,c,h){var p=n.words,d=c.words,m=h.words,y=0,f,s,l,I=p[0]|0,R=I&8191,T=I>>>13,X=p[1]|0,W=X&8191,j=X>>>13,ie=p[2]|0,Y=ie&8191,rt=ie>>>13,ue=p[3]|0,it=ue&8191,st=ue>>>13,Ne=p[4]|0,at=Ne&8191,lt=Ne>>>13,Ze=p[5]|0,dt=Ze&8191,pt=Ze>>>13,qe=p[6]|0,ct=qe&8191,ot=qe>>>13,Ue=p[7]|0,ut=Ue&8191,ht=Ue>>>13,Fe=p[8]|0,ft=Fe&8191,gt=Fe>>>13,Je=p[9]|0,mt=Je&8191,vt=Je>>>13,Or=d[0]|0,yt=Or&8191,wt=Or>>>13,Nr=d[1]|0,bt=Nr&8191,Mt=Nr>>>13,qr=d[2]|0,xt=qr&8191,_t=qr>>>13,Ur=d[3]|0,St=Ur&8191,kt=Ur>>>13,Fr=d[4]|0,At=Fr&8191,Et=Fr>>>13,Kr=d[5]|0,Bt=Kr&8191,It=Kr>>>13,Dr=d[6]|0,Rt=Dr&8191,Tt=Dr>>>13,zr=d[7]|0,Ct=zr&8191,Pt=zr>>>13,Hr=d[8]|0,Lt=Hr&8191,Ot=Hr>>>13,$r=d[9]|0,Nt=$r&8191,qt=$r>>>13;h.negative=n.negative^c.negative,h.length=19,f=Math.imul(R,yt),s=Math.imul(R,wt),s=s+Math.imul(T,yt)|0,l=Math.imul(T,wt);var Xe=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,f=Math.imul(W,yt),s=Math.imul(W,wt),s=s+Math.imul(j,yt)|0,l=Math.imul(j,wt),f=f+Math.imul(R,bt)|0,s=s+Math.imul(R,Mt)|0,s=s+Math.imul(T,bt)|0,l=l+Math.imul(T,Mt)|0;var Ye=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,f=Math.imul(Y,yt),s=Math.imul(Y,wt),s=s+Math.imul(rt,yt)|0,l=Math.imul(rt,wt),f=f+Math.imul(W,bt)|0,s=s+Math.imul(W,Mt)|0,s=s+Math.imul(j,bt)|0,l=l+Math.imul(j,Mt)|0,f=f+Math.imul(R,xt)|0,s=s+Math.imul(R,_t)|0,s=s+Math.imul(T,xt)|0,l=l+Math.imul(T,_t)|0;var Qe=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,f=Math.imul(it,yt),s=Math.imul(it,wt),s=s+Math.imul(st,yt)|0,l=Math.imul(st,wt),f=f+Math.imul(Y,bt)|0,s=s+Math.imul(Y,Mt)|0,s=s+Math.imul(rt,bt)|0,l=l+Math.imul(rt,Mt)|0,f=f+Math.imul(W,xt)|0,s=s+Math.imul(W,_t)|0,s=s+Math.imul(j,xt)|0,l=l+Math.imul(j,_t)|0,f=f+Math.imul(R,St)|0,s=s+Math.imul(R,kt)|0,s=s+Math.imul(T,St)|0,l=l+Math.imul(T,kt)|0;var tr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,f=Math.imul(at,yt),s=Math.imul(at,wt),s=s+Math.imul(lt,yt)|0,l=Math.imul(lt,wt),f=f+Math.imul(it,bt)|0,s=s+Math.imul(it,Mt)|0,s=s+Math.imul(st,bt)|0,l=l+Math.imul(st,Mt)|0,f=f+Math.imul(Y,xt)|0,s=s+Math.imul(Y,_t)|0,s=s+Math.imul(rt,xt)|0,l=l+Math.imul(rt,_t)|0,f=f+Math.imul(W,St)|0,s=s+Math.imul(W,kt)|0,s=s+Math.imul(j,St)|0,l=l+Math.imul(j,kt)|0,f=f+Math.imul(R,At)|0,s=s+Math.imul(R,Et)|0,s=s+Math.imul(T,At)|0,l=l+Math.imul(T,Et)|0;var er=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(er>>>26)|0,er&=67108863,f=Math.imul(dt,yt),s=Math.imul(dt,wt),s=s+Math.imul(pt,yt)|0,l=Math.imul(pt,wt),f=f+Math.imul(at,bt)|0,s=s+Math.imul(at,Mt)|0,s=s+Math.imul(lt,bt)|0,l=l+Math.imul(lt,Mt)|0,f=f+Math.imul(it,xt)|0,s=s+Math.imul(it,_t)|0,s=s+Math.imul(st,xt)|0,l=l+Math.imul(st,_t)|0,f=f+Math.imul(Y,St)|0,s=s+Math.imul(Y,kt)|0,s=s+Math.imul(rt,St)|0,l=l+Math.imul(rt,kt)|0,f=f+Math.imul(W,At)|0,s=s+Math.imul(W,Et)|0,s=s+Math.imul(j,At)|0,l=l+Math.imul(j,Et)|0,f=f+Math.imul(R,Bt)|0,s=s+Math.imul(R,It)|0,s=s+Math.imul(T,Bt)|0,l=l+Math.imul(T,It)|0;var rr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,f=Math.imul(ct,yt),s=Math.imul(ct,wt),s=s+Math.imul(ot,yt)|0,l=Math.imul(ot,wt),f=f+Math.imul(dt,bt)|0,s=s+Math.imul(dt,Mt)|0,s=s+Math.imul(pt,bt)|0,l=l+Math.imul(pt,Mt)|0,f=f+Math.imul(at,xt)|0,s=s+Math.imul(at,_t)|0,s=s+Math.imul(lt,xt)|0,l=l+Math.imul(lt,_t)|0,f=f+Math.imul(it,St)|0,s=s+Math.imul(it,kt)|0,s=s+Math.imul(st,St)|0,l=l+Math.imul(st,kt)|0,f=f+Math.imul(Y,At)|0,s=s+Math.imul(Y,Et)|0,s=s+Math.imul(rt,At)|0,l=l+Math.imul(rt,Et)|0,f=f+Math.imul(W,Bt)|0,s=s+Math.imul(W,It)|0,s=s+Math.imul(j,Bt)|0,l=l+Math.imul(j,It)|0,f=f+Math.imul(R,Rt)|0,s=s+Math.imul(R,Tt)|0,s=s+Math.imul(T,Rt)|0,l=l+Math.imul(T,Tt)|0;var nr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,f=Math.imul(ut,yt),s=Math.imul(ut,wt),s=s+Math.imul(ht,yt)|0,l=Math.imul(ht,wt),f=f+Math.imul(ct,bt)|0,s=s+Math.imul(ct,Mt)|0,s=s+Math.imul(ot,bt)|0,l=l+Math.imul(ot,Mt)|0,f=f+Math.imul(dt,xt)|0,s=s+Math.imul(dt,_t)|0,s=s+Math.imul(pt,xt)|0,l=l+Math.imul(pt,_t)|0,f=f+Math.imul(at,St)|0,s=s+Math.imul(at,kt)|0,s=s+Math.imul(lt,St)|0,l=l+Math.imul(lt,kt)|0,f=f+Math.imul(it,At)|0,s=s+Math.imul(it,Et)|0,s=s+Math.imul(st,At)|0,l=l+Math.imul(st,Et)|0,f=f+Math.imul(Y,Bt)|0,s=s+Math.imul(Y,It)|0,s=s+Math.imul(rt,Bt)|0,l=l+Math.imul(rt,It)|0,f=f+Math.imul(W,Rt)|0,s=s+Math.imul(W,Tt)|0,s=s+Math.imul(j,Rt)|0,l=l+Math.imul(j,Tt)|0,f=f+Math.imul(R,Ct)|0,s=s+Math.imul(R,Pt)|0,s=s+Math.imul(T,Ct)|0,l=l+Math.imul(T,Pt)|0;var ir=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,f=Math.imul(ft,yt),s=Math.imul(ft,wt),s=s+Math.imul(gt,yt)|0,l=Math.imul(gt,wt),f=f+Math.imul(ut,bt)|0,s=s+Math.imul(ut,Mt)|0,s=s+Math.imul(ht,bt)|0,l=l+Math.imul(ht,Mt)|0,f=f+Math.imul(ct,xt)|0,s=s+Math.imul(ct,_t)|0,s=s+Math.imul(ot,xt)|0,l=l+Math.imul(ot,_t)|0,f=f+Math.imul(dt,St)|0,s=s+Math.imul(dt,kt)|0,s=s+Math.imul(pt,St)|0,l=l+Math.imul(pt,kt)|0,f=f+Math.imul(at,At)|0,s=s+Math.imul(at,Et)|0,s=s+Math.imul(lt,At)|0,l=l+Math.imul(lt,Et)|0,f=f+Math.imul(it,Bt)|0,s=s+Math.imul(it,It)|0,s=s+Math.imul(st,Bt)|0,l=l+Math.imul(st,It)|0,f=f+Math.imul(Y,Rt)|0,s=s+Math.imul(Y,Tt)|0,s=s+Math.imul(rt,Rt)|0,l=l+Math.imul(rt,Tt)|0,f=f+Math.imul(W,Ct)|0,s=s+Math.imul(W,Pt)|0,s=s+Math.imul(j,Ct)|0,l=l+Math.imul(j,Pt)|0,f=f+Math.imul(R,Lt)|0,s=s+Math.imul(R,Ot)|0,s=s+Math.imul(T,Lt)|0,l=l+Math.imul(T,Ot)|0;var sr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(sr>>>26)|0,sr&=67108863,f=Math.imul(mt,yt),s=Math.imul(mt,wt),s=s+Math.imul(vt,yt)|0,l=Math.imul(vt,wt),f=f+Math.imul(ft,bt)|0,s=s+Math.imul(ft,Mt)|0,s=s+Math.imul(gt,bt)|0,l=l+Math.imul(gt,Mt)|0,f=f+Math.imul(ut,xt)|0,s=s+Math.imul(ut,_t)|0,s=s+Math.imul(ht,xt)|0,l=l+Math.imul(ht,_t)|0,f=f+Math.imul(ct,St)|0,s=s+Math.imul(ct,kt)|0,s=s+Math.imul(ot,St)|0,l=l+Math.imul(ot,kt)|0,f=f+Math.imul(dt,At)|0,s=s+Math.imul(dt,Et)|0,s=s+Math.imul(pt,At)|0,l=l+Math.imul(pt,Et)|0,f=f+Math.imul(at,Bt)|0,s=s+Math.imul(at,It)|0,s=s+Math.imul(lt,Bt)|0,l=l+Math.imul(lt,It)|0,f=f+Math.imul(it,Rt)|0,s=s+Math.imul(it,Tt)|0,s=s+Math.imul(st,Rt)|0,l=l+Math.imul(st,Tt)|0,f=f+Math.imul(Y,Ct)|0,s=s+Math.imul(Y,Pt)|0,s=s+Math.imul(rt,Ct)|0,l=l+Math.imul(rt,Pt)|0,f=f+Math.imul(W,Lt)|0,s=s+Math.imul(W,Ot)|0,s=s+Math.imul(j,Lt)|0,l=l+Math.imul(j,Ot)|0,f=f+Math.imul(R,Nt)|0,s=s+Math.imul(R,qt)|0,s=s+Math.imul(T,Nt)|0,l=l+Math.imul(T,qt)|0;var or=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(or>>>26)|0,or&=67108863,f=Math.imul(mt,bt),s=Math.imul(mt,Mt),s=s+Math.imul(vt,bt)|0,l=Math.imul(vt,Mt),f=f+Math.imul(ft,xt)|0,s=s+Math.imul(ft,_t)|0,s=s+Math.imul(gt,xt)|0,l=l+Math.imul(gt,_t)|0,f=f+Math.imul(ut,St)|0,s=s+Math.imul(ut,kt)|0,s=s+Math.imul(ht,St)|0,l=l+Math.imul(ht,kt)|0,f=f+Math.imul(ct,At)|0,s=s+Math.imul(ct,Et)|0,s=s+Math.imul(ot,At)|0,l=l+Math.imul(ot,Et)|0,f=f+Math.imul(dt,Bt)|0,s=s+Math.imul(dt,It)|0,s=s+Math.imul(pt,Bt)|0,l=l+Math.imul(pt,It)|0,f=f+Math.imul(at,Rt)|0,s=s+Math.imul(at,Tt)|0,s=s+Math.imul(lt,Rt)|0,l=l+Math.imul(lt,Tt)|0,f=f+Math.imul(it,Ct)|0,s=s+Math.imul(it,Pt)|0,s=s+Math.imul(st,Ct)|0,l=l+Math.imul(st,Pt)|0,f=f+Math.imul(Y,Lt)|0,s=s+Math.imul(Y,Ot)|0,s=s+Math.imul(rt,Lt)|0,l=l+Math.imul(rt,Ot)|0,f=f+Math.imul(W,Nt)|0,s=s+Math.imul(W,qt)|0,s=s+Math.imul(j,Nt)|0,l=l+Math.imul(j,qt)|0;var ar=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,f=Math.imul(mt,xt),s=Math.imul(mt,_t),s=s+Math.imul(vt,xt)|0,l=Math.imul(vt,_t),f=f+Math.imul(ft,St)|0,s=s+Math.imul(ft,kt)|0,s=s+Math.imul(gt,St)|0,l=l+Math.imul(gt,kt)|0,f=f+Math.imul(ut,At)|0,s=s+Math.imul(ut,Et)|0,s=s+Math.imul(ht,At)|0,l=l+Math.imul(ht,Et)|0,f=f+Math.imul(ct,Bt)|0,s=s+Math.imul(ct,It)|0,s=s+Math.imul(ot,Bt)|0,l=l+Math.imul(ot,It)|0,f=f+Math.imul(dt,Rt)|0,s=s+Math.imul(dt,Tt)|0,s=s+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,Tt)|0,f=f+Math.imul(at,Ct)|0,s=s+Math.imul(at,Pt)|0,s=s+Math.imul(lt,Ct)|0,l=l+Math.imul(lt,Pt)|0,f=f+Math.imul(it,Lt)|0,s=s+Math.imul(it,Ot)|0,s=s+Math.imul(st,Lt)|0,l=l+Math.imul(st,Ot)|0,f=f+Math.imul(Y,Nt)|0,s=s+Math.imul(Y,qt)|0,s=s+Math.imul(rt,Nt)|0,l=l+Math.imul(rt,qt)|0;var cr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,f=Math.imul(mt,St),s=Math.imul(mt,kt),s=s+Math.imul(vt,St)|0,l=Math.imul(vt,kt),f=f+Math.imul(ft,At)|0,s=s+Math.imul(ft,Et)|0,s=s+Math.imul(gt,At)|0,l=l+Math.imul(gt,Et)|0,f=f+Math.imul(ut,Bt)|0,s=s+Math.imul(ut,It)|0,s=s+Math.imul(ht,Bt)|0,l=l+Math.imul(ht,It)|0,f=f+Math.imul(ct,Rt)|0,s=s+Math.imul(ct,Tt)|0,s=s+Math.imul(ot,Rt)|0,l=l+Math.imul(ot,Tt)|0,f=f+Math.imul(dt,Ct)|0,s=s+Math.imul(dt,Pt)|0,s=s+Math.imul(pt,Ct)|0,l=l+Math.imul(pt,Pt)|0,f=f+Math.imul(at,Lt)|0,s=s+Math.imul(at,Ot)|0,s=s+Math.imul(lt,Lt)|0,l=l+Math.imul(lt,Ot)|0,f=f+Math.imul(it,Nt)|0,s=s+Math.imul(it,qt)|0,s=s+Math.imul(st,Nt)|0,l=l+Math.imul(st,qt)|0;var ur=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,f=Math.imul(mt,At),s=Math.imul(mt,Et),s=s+Math.imul(vt,At)|0,l=Math.imul(vt,Et),f=f+Math.imul(ft,Bt)|0,s=s+Math.imul(ft,It)|0,s=s+Math.imul(gt,Bt)|0,l=l+Math.imul(gt,It)|0,f=f+Math.imul(ut,Rt)|0,s=s+Math.imul(ut,Tt)|0,s=s+Math.imul(ht,Rt)|0,l=l+Math.imul(ht,Tt)|0,f=f+Math.imul(ct,Ct)|0,s=s+Math.imul(ct,Pt)|0,s=s+Math.imul(ot,Ct)|0,l=l+Math.imul(ot,Pt)|0,f=f+Math.imul(dt,Lt)|0,s=s+Math.imul(dt,Ot)|0,s=s+Math.imul(pt,Lt)|0,l=l+Math.imul(pt,Ot)|0,f=f+Math.imul(at,Nt)|0,s=s+Math.imul(at,qt)|0,s=s+Math.imul(lt,Nt)|0,l=l+Math.imul(lt,qt)|0;var hr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,f=Math.imul(mt,Bt),s=Math.imul(mt,It),s=s+Math.imul(vt,Bt)|0,l=Math.imul(vt,It),f=f+Math.imul(ft,Rt)|0,s=s+Math.imul(ft,Tt)|0,s=s+Math.imul(gt,Rt)|0,l=l+Math.imul(gt,Tt)|0,f=f+Math.imul(ut,Ct)|0,s=s+Math.imul(ut,Pt)|0,s=s+Math.imul(ht,Ct)|0,l=l+Math.imul(ht,Pt)|0,f=f+Math.imul(ct,Lt)|0,s=s+Math.imul(ct,Ot)|0,s=s+Math.imul(ot,Lt)|0,l=l+Math.imul(ot,Ot)|0,f=f+Math.imul(dt,Nt)|0,s=s+Math.imul(dt,qt)|0,s=s+Math.imul(pt,Nt)|0,l=l+Math.imul(pt,qt)|0;var fr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,f=Math.imul(mt,Rt),s=Math.imul(mt,Tt),s=s+Math.imul(vt,Rt)|0,l=Math.imul(vt,Tt),f=f+Math.imul(ft,Ct)|0,s=s+Math.imul(ft,Pt)|0,s=s+Math.imul(gt,Ct)|0,l=l+Math.imul(gt,Pt)|0,f=f+Math.imul(ut,Lt)|0,s=s+Math.imul(ut,Ot)|0,s=s+Math.imul(ht,Lt)|0,l=l+Math.imul(ht,Ot)|0,f=f+Math.imul(ct,Nt)|0,s=s+Math.imul(ct,qt)|0,s=s+Math.imul(ot,Nt)|0,l=l+Math.imul(ot,qt)|0;var lr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,f=Math.imul(mt,Ct),s=Math.imul(mt,Pt),s=s+Math.imul(vt,Ct)|0,l=Math.imul(vt,Pt),f=f+Math.imul(ft,Lt)|0,s=s+Math.imul(ft,Ot)|0,s=s+Math.imul(gt,Lt)|0,l=l+Math.imul(gt,Ot)|0,f=f+Math.imul(ut,Nt)|0,s=s+Math.imul(ut,qt)|0,s=s+Math.imul(ht,Nt)|0,l=l+Math.imul(ht,qt)|0;var dr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,f=Math.imul(mt,Lt),s=Math.imul(mt,Ot),s=s+Math.imul(vt,Lt)|0,l=Math.imul(vt,Ot),f=f+Math.imul(ft,Nt)|0,s=s+Math.imul(ft,qt)|0,s=s+Math.imul(gt,Nt)|0,l=l+Math.imul(gt,qt)|0;var pr=(y+f|0)+((s&8191)<<13)|0;y=(l+(s>>>13)|0)+(pr>>>26)|0,pr&=67108863,f=Math.imul(mt,Nt),s=Math.imul(mt,qt),s=s+Math.imul(vt,Nt)|0,l=Math.imul(vt,qt);var gr=(y+f|0)+((s&8191)<<13)|0;return y=(l+(s>>>13)|0)+(gr>>>26)|0,gr&=67108863,m[0]=Xe,m[1]=Ye,m[2]=Qe,m[3]=tr,m[4]=er,m[5]=rr,m[6]=nr,m[7]=ir,m[8]=sr,m[9]=or,m[10]=ar,m[11]=cr,m[12]=ur,m[13]=hr,m[14]=fr,m[15]=lr,m[16]=dr,m[17]=pr,m[18]=gr,y!==0&&(m[19]=y,h.length++),h};Math.imul||(K=q);function C(g,n,c){c.negative=n.negative^g.negative,c.length=g.length+n.length;for(var h=0,p=0,d=0;d<c.length-1;d++){var m=p;p=0;for(var y=h&67108863,f=Math.min(d,n.length-1),s=Math.max(0,d-g.length+1);s<=f;s++){var l=d-s,I=g.words[l]|0,R=n.words[s]|0,T=I*R,X=T&67108863;m=m+(T/67108864|0)|0,X=X+y|0,y=X&67108863,m=m+(X>>>26)|0,p+=m>>>26,m&=67108863}c.words[d]=y,h=m,m=p}return h!==0?c.words[d]=h:c.length--,c._strip()}function N(g,n,c){return C(g,n,c)}i.prototype.mulTo=function(n,c){var h,p=this.length+n.length;return this.length===10&&n.length===10?h=K(this,n,c):p<63?h=q(this,n,c):p<1024?h=C(this,n,c):h=N(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),N(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,p=0;p<this.length;p++){var d=(this.words[p]|0)*n,m=(d&67108863)+(h&67108863);h>>=26,h+=d/67108864|0,h+=m>>>26,this.words[p]=m&67108863}return h!==0&&(this.words[p]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=_(n);if(c.length===0)return new i(1);for(var h=this,p=0;p<c.length&&c[p]===0;p++,h=h.sqr());if(++p<c.length)for(var d=h.sqr();p<c.length;p++,d=d.sqr())c[p]!==0&&(h=h.mul(d));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,p=67108863>>>26-c<<26-c,d;if(c!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&p,f=(this.words[d]|0)-y<<c;this.words[d]=f|m,m=y>>>26-c}m&&(this.words[d]=m,this.length++)}if(h!==0){for(d=this.length-1;d>=0;d--)this.words[d+h]=this.words[d];for(d=0;d<h;d++)this.words[d]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var p;c?p=(c-c%26)/26:p=0;var d=n%26,m=Math.min((n-d)/26,this.length),y=67108863^67108863>>>d<<d,f=h;if(p-=m,p=Math.max(0,p),f){for(var s=0;s<m;s++)f.words[s]=this.words[s];f.length=m}if(m!==0)if(this.length>m)for(this.length-=m,s=0;s<this.length;s++)this.words[s]=this.words[s+m];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(l!==0||s>=p);s--){var I=this.words[s]|0;this.words[s]=l<<26-d|I>>>d,l=I&y}return f&&l!==0&&(f.words[f.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,p=1<<c;if(this.length<=h)return!1;var d=this.words[h];return!!(d&p)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var p=n.length+h,d;this._expand(p);var m,y=0;for(d=0;d<n.length;d++){m=(this.words[d+h]|0)+y;var f=(n.words[d]|0)*c;m-=f&67108863,y=(m>>26)-(f/67108864|0),this.words[d+h]=m&67108863}for(;d<this.length-h;d++)m=(this.words[d+h]|0)+y,y=m>>26,this.words[d+h]=m&67108863;if(y===0)return this._strip();for(r(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,p=this.clone(),d=n,m=d.words[d.length-1]|0,y=this._countBits(m);h=26-y,h!==0&&(d=d.ushln(h),p.iushln(h),m=d.words[d.length-1]|0);var f=p.length-d.length,s;if(c!=="mod"){s=new i(null),s.length=f+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var I=p.clone()._ishlnsubmul(d,1,f);I.negative===0&&(p=I,s&&(s.words[f]=1));for(var R=f-1;R>=0;R--){var T=(p.words[d.length+R]|0)*67108864+(p.words[d.length+R-1]|0);for(T=Math.min(T/m|0,67108863),p._ishlnsubmul(d,T,R);p.negative!==0;)T--,p.negative=0,p._ishlnsubmul(d,1,R),p.isZero()||(p.negative^=1);s&&(s.words[R]=T)}return s&&s._strip(),p._strip(),c!=="div"&&h!==0&&p.iushrn(h),{div:s||null,mod:p}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,d,m;return this.negative!==0&&n.negative===0?(m=this.neg().divmod(n,c),c!=="mod"&&(p=m.div.neg()),c!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.iadd(n)),{div:p,mod:d}):this.negative===0&&n.negative!==0?(m=this.divmod(n.neg(),c),c!=="mod"&&(p=m.div.neg()),{div:p,mod:m.mod}):this.negative&n.negative?(m=this.neg().divmod(n.neg(),c),c!=="div"&&(d=m.mod.neg(),h&&d.negative!==0&&d.isub(n)),{div:m.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,p=n.ushrn(1),d=n.andln(1),m=h.cmp(p);return m<0||d===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,p=0,d=this.length-1;d>=0;d--)p=(h*p+(this.words[d]|0))%n;return c?-p:p},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,p=this.length-1;p>=0;p--){var d=(this.words[p]|0)+h*67108864;this.words[p]=d/n|0,h=d%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var p=new i(1),d=new i(0),m=new i(0),y=new i(1),f=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++f;for(var s=h.clone(),l=c.clone();!c.isZero();){for(var I=0,R=1;!(c.words[0]&R)&&I<26;++I,R<<=1);if(I>0)for(c.iushrn(I);I-- >0;)(p.isOdd()||d.isOdd())&&(p.iadd(s),d.isub(l)),p.iushrn(1),d.iushrn(1);for(var T=0,X=1;!(h.words[0]&X)&&T<26;++T,X<<=1);if(T>0)for(h.iushrn(T);T-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(s),y.isub(l)),m.iushrn(1),y.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(m),d.isub(y)):(h.isub(c),m.isub(p),y.isub(d))}return{a:m,b:y,gcd:h.iushln(f)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var p=new i(1),d=new i(0),m=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var y=0,f=1;!(c.words[0]&f)&&y<26;++y,f<<=1);if(y>0)for(c.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(m),p.iushrn(1);for(var s=0,l=1;!(h.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(h.iushrn(s);s-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(d)):(h.isub(c),d.isub(p))}var I;return c.cmpn(1)===0?I=p:I=d,I.cmpn(0)<0&&I.iadd(n),I},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var p=0;c.isEven()&&h.isEven();p++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var d=c.cmp(h);if(d<0){var m=c;c=h,h=m}else if(d===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(p)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,p=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var d=p,m=h;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var p=this.words[0]|0;h=p===n?0:p<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,d=n.words[h]|0;if(p!==d){p<d?c=-1:p>d&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new V(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var U={k256:null,p224:null,p192:null,p25519:null};function P(g,n){this.name=g,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},P.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var p=h<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},P.prototype.split=function(n,c){n.iushrn(this.n,0,c)},P.prototype.imulK=function(n){return n.imul(this.k)};function G(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(G,P),G.prototype.split=function(n,c){for(var h=4194303,p=Math.min(n.length,9),d=0;d<p;d++)c.words[d]=n.words[d];if(c.length=p,n.length<=9){n.words[0]=0,n.length=1;return}var m=n.words[9];for(c.words[c.length++]=m&h,d=10;d<n.length;d++){var y=n.words[d]|0;n.words[d-10]=(y&h)<<4|m>>>22,m=y}m>>>=22,n.words[d-10]=m,m===0&&n.length>10?n.length-=10:n.length-=9},G.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var p=n.words[h]|0;c+=p*977,n.words[h]=c&67108863,c=p*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function z(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(z,P);function Q(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(Q,P);function Wt(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Wt,P),Wt.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var p=(n.words[h]|0)*19+c,d=p&67108863;p>>>=26,n.words[h]=d,c=p}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(U[n])return U[n];var c;if(n==="k256")c=new G;else if(n==="p224")c=new z;else if(n==="p192")c=new Q;else if(n==="p25519")c=new Wt;else throw new Error("Unknown prime "+n);return U[n]=c,c};function V(g){if(typeof g=="string"){var n=i._prime(g);this.m=n.p,this.prime=n}else r(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}V.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},V.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},V.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(b(n,n.umod(this.m)._forceRed(this)),n)},V.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},V.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},V.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},V.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},V.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},V.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},V.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},V.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},V.prototype.isqr=function(n){return this.imul(n,n.clone())},V.prototype.sqr=function(n){return this.mul(n,n)},V.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var p=this.m.subn(1),d=0;!p.isZero()&&p.andln(1)===0;)d++,p.iushrn(1);r(!p.isZero());var m=new i(1).toRed(this),y=m.redNeg(),f=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,f).cmp(y)!==0;)s.redIAdd(y);for(var l=this.pow(s,p),I=this.pow(n,p.addn(1).iushrn(1)),R=this.pow(n,p),T=d;R.cmp(m)!==0;){for(var X=R,W=0;X.cmp(m)!==0;W++)X=X.redSqr();r(W<T);var j=this.pow(l,new i(1).iushln(T-W-1));I=I.redMul(j),l=j.redSqr(),R=R.redMul(l),T=W}return I},V.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},V.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,p=new Array(1<<h);p[0]=new i(1).toRed(this),p[1]=n;for(var d=2;d<p.length;d++)p[d]=this.mul(p[d-1],n);var m=p[0],y=0,f=0,s=c.bitLength()%26;for(s===0&&(s=26),d=c.length-1;d>=0;d--){for(var l=c.words[d],I=s-1;I>=0;I--){var R=l>>I&1;if(m!==p[0]&&(m=this.sqr(m)),R===0&&y===0){f=0;continue}y<<=1,y|=R,f++,!(f!==h&&(d!==0||I!==0))&&(m=this.mul(m,p[y]),f=0,y=0)}s=26}return m},V.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},V.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new Vt(n)};function Vt(g){V.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Vt,V),Vt.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Vt.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},Vt.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Vt.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=h.isub(p).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},Vt.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(o,Me)})(si);var ra=si.exports;function Pe(o,t,e){return t<=o&&o<=e}function Mn(o){if(o===void 0)return{};if(o===Object(o))return o;throw TypeError("Could not convert argument to dictionary")}function na(o){for(var t=String(o),e=t.length,r=0,a=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)a.push(i);else if(56320<=i&&i<=57343)a.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)a.push(65533);else{var u=o.charCodeAt(r+1);if(56320<=u&&u<=57343){var v=i&1023,w=u&1023;a.push(65536+(v<<10)+w),r+=1}else a.push(65533)}r+=1}return a}function ia(o){for(var t="",e=0;e<o.length;++e){var r=o[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var ln=-1;function oi(o){this.tokens=[].slice.call(o)}oi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ln},prepend:function(o){if(Array.isArray(o))for(var t=o;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(o)},push:function(o){if(Array.isArray(o))for(var t=o;t.length;)this.tokens.push(t.shift());else this.tokens.push(o)}};var Br=-1;function Cn(o,t){if(o)throw TypeError("Decoder error");return t||65533}var dn="utf-8";function pn(o,t){if(!(this instanceof pn))return new pn(o,t);if(o=o!==void 0?String(o).toLowerCase():dn,o!==dn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Mn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}pn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Mn(e),this._streaming||(this._decoder=new sa({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var a=new oi(r),i=[],u;!a.endOfStream()&&(u=this._decoder.handler(a,a.read()),u!==Br);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(a,a.read()),u===Br)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!a.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ia(i)}};function gn(o,t){if(!(this instanceof gn))return new gn(o,t);if(o=o!==void 0?String(o).toLowerCase():dn,o!==dn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Mn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}gn.prototype={encode:function(t,e){t=t?String(t):"",e=Mn(e),this._streaming||(this._encoder=new oa(this._options)),this._streaming=!!e.stream;for(var r=[],a=new oi(na(t)),i;!a.endOfStream()&&(i=this._encoder.handler(a,a.read()),i!==Br);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(a,a.read()),i!==Br;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function sa(o){var t=o.fatal,e=0,r=0,a=0,i=128,u=191;this.handler=function(v,w){if(w===ln&&a!==0)return a=0,Cn(t);if(w===ln)return Br;if(a===0){if(Pe(w,0,127))return w;if(Pe(w,194,223))a=1,e=w-192;else if(Pe(w,224,239))w===224&&(i=160),w===237&&(u=159),a=2,e=w-224;else if(Pe(w,240,244))w===240&&(i=144),w===244&&(u=143),a=3,e=w-240;else return Cn(t);return e=e<<6*a,null}if(!Pe(w,i,u))return e=a=r=0,i=128,u=191,v.prepend(w),Cn(t);if(i=128,u=191,r+=1,e+=w-128<<6*(a-r),r!==a)return null;var M=e;return e=a=r=0,M}}function oa(o){o.fatal,this.handler=function(t,e){if(e===ln)return Br;if(Pe(e,0,127))return e;var r,a;Pe(e,128,2047)?(r=1,a=192):Pe(e,2048,65535)?(r=2,a=224):Pe(e,65536,1114111)&&(r=3,a=240);for(var i=[(e>>6*r)+a];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const aa=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:pn,TextEncoder:gn},Symbol.toStringTag,{value:"Module"})),ca=Oe(aa);var ua=Me&&Me.__createBinding||(Object.create?function(o,t,e,r){r===void 0&&(r=e),Object.defineProperty(o,r,{enumerable:!0,get:function(){return t[e]}})}:function(o,t,e,r){r===void 0&&(r=e),o[r]=t[e]}),ha=Me&&Me.__setModuleDefault||(Object.create?function(o,t){Object.defineProperty(o,"default",{enumerable:!0,value:t})}:function(o,t){o.default=t}),Be=Me&&Me.__decorate||function(o,t,e,r){var a=arguments.length,i=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var v=o.length-1;v>=0;v--)(u=o[v])&&(i=(a<3?u(i):a>3?u(t,e,i):u(t,e))||i);return a>3&&i&&Object.defineProperty(t,e,i),i},fa=Me&&Me.__importStar||function(o){if(o&&o.__esModule)return o;var t={};if(o!=null)for(var e in o)e!=="default"&&Object.hasOwnProperty.call(o,e)&&ua(t,o,e);return ha(t,o),t},cs=Me&&Me.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ne,"__esModule",{value:!0});var us=ne.deserializeUnchecked=gs=ne.deserialize=ps=ne.serialize=ne.BinaryReader=ne.BinaryWriter=ne.BorshError=ne.baseDecode=ne.baseEncode=void 0;const We=cs(ra),hs=cs(as),la=fa(ca),da=typeof TextDecoder!="function"?la.TextDecoder:TextDecoder,pa=new da("utf-8",{fatal:!0});function ga(o){return typeof o=="string"&&(o=Buffer.from(o,"utf8")),hs.default.encode(Buffer.from(o))}ne.baseEncode=ga;function ma(o){return Buffer.from(hs.default.decode(o))}ne.baseDecode=ma;const Pn=1024;class he extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ne.BorshError=he;class fs{constructor(){this.buf=Buffer.alloc(Pn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Pn)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Pn)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ne.BinaryWriter=fs;function Ie(o,t,e){const r=e.value;e.value=function(...a){try{return r.apply(this,a)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new he("Reached the end of buffer when deserializing")}throw i}}}class me{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new We.default(t,"le")}readU128(){const t=this.readBuffer(16);return new We.default(t,"le")}readU256(){const t=this.readBuffer(32);return new We.default(t,"le")}readU512(){const t=this.readBuffer(64);return new We.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new he(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return pa.decode(e)}catch(r){throw new he(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let a=0;a<e;++a)r.push(t());return r}}Be([Ie],me.prototype,"readU8",null);Be([Ie],me.prototype,"readU16",null);Be([Ie],me.prototype,"readU32",null);Be([Ie],me.prototype,"readU64",null);Be([Ie],me.prototype,"readU128",null);Be([Ie],me.prototype,"readU256",null);Be([Ie],me.prototype,"readU512",null);Be([Ie],me.prototype,"readString",null);Be([Ie],me.prototype,"readFixedArray",null);Be([Ie],me.prototype,"readArray",null);ne.BinaryReader=me;function ls(o){return o.charAt(0).toUpperCase()+o.slice(1)}function mr(o,t,e,r,a){try{if(typeof r=="string")a[`write${ls(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new he(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);a.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new he(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)mr(o,null,e[i],r[0],a)}else a.writeArray(e,i=>{mr(o,t,i,r[0],a)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?a.writeU8(0):(a.writeU8(1),mr(o,t,e,r.type,a));break}case"map":{a.writeU32(e.size),e.forEach((i,u)=>{mr(o,t,u,r.key,a),mr(o,t,i,r.value,a)});break}default:throw new he(`FieldType ${r} unrecognized`)}else ds(o,e,a)}catch(i){throw i instanceof he&&i.addToFieldPath(t),i}}function ds(o,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=o.get(t.constructor);if(!r)throw new he(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([a,i])=>{mr(o,a,t[a],i,e)});else if(r.kind==="enum"){const a=t[r.field];for(let i=0;i<r.values.length;++i){const[u,v]=r.values[i];if(u===a){e.writeU8(i),mr(o,u,t[u],v,e);break}}}else throw new he(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function va(o,t,e=fs){const r=new e;return ds(o,t,r),r.toArray()}var ps=ne.serialize=va;function vr(o,t,e,r){try{if(typeof e=="string")return r[`read${ls(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const a=[];for(let i=0;i<e[1];i++)a.push(vr(o,null,e[0],r));return a}else return r.readArray(()=>vr(o,t,e[0],r))}if(e.kind==="option")return r.readU8()?vr(o,t,e.type,r):void 0;if(e.kind==="map"){let a=new Map;const i=r.readU32();for(let u=0;u<i;u++){const v=vr(o,t,e.key,r),w=vr(o,t,e.value,r);a.set(v,w)}return a}return ai(o,e,r)}catch(a){throw a instanceof he&&a.addToFieldPath(t),a}}function ai(o,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=o.get(t);if(!r)throw new he(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const a={};for(const[i,u]of o.get(t).fields)a[i]=vr(o,i,u,e);return new t(a)}if(r.kind==="enum"){const a=e.readU8();if(a>=r.values.length)throw new he(`Enum index: ${a} is out of range`);const[i,u]=r.values[a],v=vr(o,i,u,e);return new t({[i]:v})}throw new he(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function ya(o,t,e,r=me){const a=new r(e),i=ai(o,t,a);if(a.offset<e.length)throw new he(`Unexpected ${e.length-a.offset} bytes after deserialized data`);return i}var gs=ne.deserialize=ya;function wa(o,t,e,r=me){const a=new r(e);return ai(o,t,a)}us=ne.deserializeUnchecked=wa;var S={};Object.defineProperty(S,"__esModule",{value:!0});S.s16=S.s8=S.nu64be=S.u48be=S.u40be=S.u32be=S.u24be=S.u16be=re=S.nu64=S.u48=S.u40=tt=S.u32=S.u24=ve=S.u16=$t=S.u8=yr=S.offset=S.greedy=S.Constant=S.UTF8=S.CString=S.Blob=S.Boolean=S.BitField=S.BitStructure=S.VariantLayout=S.Union=S.UnionLayoutDiscriminator=S.UnionDiscriminator=S.Structure=S.Sequence=S.DoubleBE=S.Double=S.FloatBE=S.Float=S.NearInt64BE=S.NearInt64=S.NearUInt64BE=S.NearUInt64=S.IntBE=S.Int=S.UIntBE=S.UInt=S.OffsetLayout=S.GreedyCount=S.ExternalLayout=S.bindConstructorLayout=S.nameWithProperty=S.Layout=S.uint8ArrayToBuffer=S.checkUint8Array=void 0;S.constant=S.utf8=S.cstr=Xt=S.blob=S.unionLayoutDiscriminator=S.union=fe=S.seq=S.bits=J=S.struct=S.f64be=S.f64=S.f32be=S.f32=S.ns64be=S.s48be=S.s40be=S.s32be=S.s24be=S.s16be=ge=S.ns64=S.s48=S.s40=S.s32=S.s24=void 0;const ci=Kt;function Cr(o){if(!(o instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}S.checkUint8Array=Cr;function Ht(o){return Cr(o),ci.Buffer.from(o.buffer,o.byteOffset,o.length)}S.uint8ArrayToBuffer=Ht;class Gt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}S.Layout=Gt;function ui(o,t){return t.property?o+"["+t.property+"]":o}S.nameWithProperty=ui;function ba(o,t){if(typeof o!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(o,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Gt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");o.layout_=t,t.boundConstructor_=o,t.makeDestinationObject=()=>new o,Object.defineProperty(o.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(o,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}S.bindConstructorLayout=ba;class le extends Gt{isCount(){throw new Error("ExternalLayout is abstract")}}S.ExternalLayout=le;class ms extends le{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Cr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}S.GreedyCount=ms;class hi extends le{constructor(t,e=0,r){if(!(t instanceof Gt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof be||this.layout instanceof _e}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}S.OffsetLayout=hi;class be extends Gt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ht(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Ht(e).writeUIntLE(t,r,this.span),this.span}}S.UInt=be;class _e extends Gt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ht(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Ht(e).writeUIntBE(t,r,this.span),this.span}}S.UIntBE=_e;class wr extends Gt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ht(t).readIntLE(e,this.span)}encode(t,e,r=0){return Ht(e).writeIntLE(t,r,this.span),this.span}}S.Int=wr;class Pr extends Gt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ht(t).readIntBE(e,this.span)}encode(t,e,r=0){return Ht(e).writeIntBE(t,r,this.span),this.span}}S.IntBE=Pr;const $n=Math.pow(2,32);function xn(o){const t=Math.floor(o/$n),e=o-t*$n;return{hi32:t,lo32:e}}function _n(o,t){return o*$n+t}class vs extends Gt{constructor(t){super(8,t)}decode(t,e=0){const r=Ht(t),a=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return _n(i,a)}encode(t,e,r=0){const a=xn(t),i=Ht(e);return i.writeUInt32LE(a.lo32,r),i.writeUInt32LE(a.hi32,r+4),8}}S.NearUInt64=vs;class ys extends Gt{constructor(t){super(8,t)}decode(t,e=0){const r=Ht(t),a=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return _n(a,i)}encode(t,e,r=0){const a=xn(t),i=Ht(e);return i.writeUInt32BE(a.hi32,r),i.writeUInt32BE(a.lo32,r+4),8}}S.NearUInt64BE=ys;class ws extends Gt{constructor(t){super(8,t)}decode(t,e=0){const r=Ht(t),a=r.readUInt32LE(e),i=r.readInt32LE(e+4);return _n(i,a)}encode(t,e,r=0){const a=xn(t),i=Ht(e);return i.writeUInt32LE(a.lo32,r),i.writeInt32LE(a.hi32,r+4),8}}S.NearInt64=ws;class bs extends Gt{constructor(t){super(8,t)}decode(t,e=0){const r=Ht(t),a=r.readInt32BE(e),i=r.readUInt32BE(e+4);return _n(a,i)}encode(t,e,r=0){const a=xn(t),i=Ht(e);return i.writeInt32BE(a.hi32,r),i.writeUInt32BE(a.lo32,r+4),8}}S.NearInt64BE=bs;class Ms extends Gt{constructor(t){super(4,t)}decode(t,e=0){return Ht(t).readFloatLE(e)}encode(t,e,r=0){return Ht(e).writeFloatLE(t,r),4}}S.Float=Ms;class xs extends Gt{constructor(t){super(4,t)}decode(t,e=0){return Ht(t).readFloatBE(e)}encode(t,e,r=0){return Ht(e).writeFloatBE(t,r),4}}S.FloatBE=xs;class _s extends Gt{constructor(t){super(8,t)}decode(t,e=0){return Ht(t).readDoubleLE(e)}encode(t,e,r=0){return Ht(e).writeDoubleLE(t,r),8}}S.Double=_s;class Ss extends Gt{constructor(t){super(8,t)}decode(t,e=0){return Ht(t).readDoubleBE(e)}encode(t,e,r=0){return Ht(e).writeDoubleBE(t,r),8}}S.DoubleBE=Ss;class ks extends Gt{constructor(t,e,r){if(!(t instanceof Gt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof le&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let a=-1;!(e instanceof le)&&0<t.span&&(a=e*t.span),super(a,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,a=this.count;if(a instanceof le&&(a=a.decode(t,e)),0<this.elementLayout.span)r=a*this.elementLayout.span;else{let i=0;for(;i<a;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let a=0,i=this.count;for(i instanceof le&&(i=i.decode(t,e));a<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),a+=1;return r}encode(t,e,r=0){const a=this.elementLayout,i=t.reduce((u,v)=>u+a.encode(v,e,r+u),0);return this.count instanceof le&&this.count.encode(t.length,e,r),i}}S.Sequence=ks;class As extends Gt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof Gt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let a=-1;try{a=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(a,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((a,i)=>{const u=i.getSpan(t,e);return e+=u,a+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Cr(t);const r=this.makeDestinationObject();for(const a of this.fields)if(a.property!==void 0&&(r[a.property]=a.decode(t,e)),e+=a.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const a=r;let i=0,u=0;for(const v of this.fields){let w=v.span;if(u=0<w?w:0,v.property!==void 0){const M=t[v.property];M!==void 0&&(u=v.encode(M,e,r),0>w&&(w=v.getSpan(e,r)))}i=r,r+=w}return i+u-a}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}S.Structure=As;class fi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}S.UnionDiscriminator=fi;class mn extends fi{constructor(t,e){if(!(t instanceof le&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}S.UnionLayoutDiscriminator=mn;class li extends Gt{constructor(t,e,r){let a;if(t instanceof be||t instanceof _e)a=new mn(new hi(t));else if(t instanceof le&&t.isCount())a=new mn(t);else if(t instanceof fi)a=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Gt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof be||t instanceof _e)&&(i+=a.layout.span)),super(i,r),this.discriminator=a,this.usesPrefixDiscriminator=t instanceof be||t instanceof _e,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(v){return u(v)},this.configGetSourceVariant=function(v){u=v.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const a=this.discriminator,i=a.decode(t,e),u=this.registry[i];if(u===void 0){const v=this.defaultLayout;let w=0;this.usesPrefixDiscriminator&&(w=a.layout.span),r=this.makeDestinationObject(),r[a.property]=i,r[v.property]=v.decode(t,e+w)}else r=u.decode(t,e);return r}encode(t,e,r=0){const a=this.getSourceVariant(t);if(a===void 0){const i=this.discriminator,u=this.defaultLayout;let v=0;return this.usesPrefixDiscriminator&&(v=i.layout.span),i.encode(t[i.property],e,r),v+u.encode(t[u.property],e,r+v)}return a.encode(t,e,r)}addVariant(t,e,r){const a=new Es(this,t,e,r);return this.registry[t]=a,a}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}S.Union=li;class Es extends Gt{constructor(t,e,r,a){if(!(t instanceof li))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&a===void 0&&(a=r,r=null),r){if(!(r instanceof Gt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof a!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,a),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let a=0;return this.layout&&(a=this.layout.getSpan(t,e+r)),r+a}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let a=0;return this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+a):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let a=0;if(this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=a;if(this.layout&&(this.layout.encode(t[this.property],e,r+a),i+=this.layout.getSpan(e,r+a),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}S.VariantLayout=Es;function Sr(o){return 0>o&&(o+=4294967296),o}class di extends Gt{constructor(t,e,r){if(!(t instanceof be||t instanceof _e))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let a=0;this._packedSetValue=function(i){return a=Sr(i),this},this._packedGetValue=function(){return a}}decode(t,e=0){const r=this.makeDestinationObject(),a=this.word.decode(t,e);this._packedSetValue(a);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const a=this.word.decode(e,r);this._packedSetValue(a);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new pi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Bs(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}S.BitStructure=di;class pi{constructor(t,e,r){if(!(t instanceof di))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const a=8*t.span,i=t.fields.reduce((u,v)=>u+v.bits,0);if(e+i>a)throw new Error("bits too long for span remainder ("+(a-i)+" of "+a+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=a-i-e),this.wordMask=Sr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Sr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Sr(t&this.valueMask))throw new TypeError(ui("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Sr(t<<this.start);this.container._packedSetValue(Sr(e&~this.wordMask)|r)}}S.BitField=pi;let Bs=class extends pi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};S.Boolean=Bs;class Is extends Gt{constructor(t,e){if(!(t instanceof le&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof le||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Ht(t).slice(e,e+r)}encode(t,e,r){let a=this.length;if(this.length instanceof le&&(a=t.length),!(t instanceof Uint8Array&&a===t.length))throw new TypeError(ui("Blob.encode",this)+" requires (length "+a+") Uint8Array as src");if(r+a>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Ht(t);return Ht(e).write(i.toString("hex"),r,a,"hex"),this.length instanceof le&&this.length.encode(a,e,r),a}}S.Blob=Is;class Rs extends Gt{constructor(t){super(-1,t)}getSpan(t,e=0){Cr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Ht(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const a=ci.Buffer.from(t,"utf8"),i=a.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=Ht(e);return a.copy(u,r),u[r+i]=0,i+1}}S.CString=Rs;class Ts extends Gt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Cr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Ht(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const a=ci.Buffer.from(t,"utf8"),i=a.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return a.copy(Ht(e),r),i}}S.UTF8=Ts;class Cs extends Gt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}S.Constant=Cs;S.greedy=(o,t)=>new ms(o,t);var yr=S.offset=(o,t,e)=>new hi(o,t,e),$t=S.u8=o=>new be(1,o),ve=S.u16=o=>new be(2,o);S.u24=o=>new be(3,o);var tt=S.u32=o=>new be(4,o);S.u40=o=>new be(5,o);S.u48=o=>new be(6,o);var re=S.nu64=o=>new vs(o);S.u16be=o=>new _e(2,o);S.u24be=o=>new _e(3,o);S.u32be=o=>new _e(4,o);S.u40be=o=>new _e(5,o);S.u48be=o=>new _e(6,o);S.nu64be=o=>new ys(o);S.s8=o=>new wr(1,o);S.s16=o=>new wr(2,o);S.s24=o=>new wr(3,o);S.s32=o=>new wr(4,o);S.s40=o=>new wr(5,o);S.s48=o=>new wr(6,o);var ge=S.ns64=o=>new ws(o);S.s16be=o=>new Pr(2,o);S.s24be=o=>new Pr(3,o);S.s32be=o=>new Pr(4,o);S.s40be=o=>new Pr(5,o);S.s48be=o=>new Pr(6,o);S.ns64be=o=>new bs(o);S.f32=o=>new Ms(o);S.f32be=o=>new xs(o);S.f64=o=>new _s(o);S.f64be=o=>new Ss(o);var J=S.struct=(o,t,e)=>new As(o,t,e);S.bits=(o,t,e)=>new di(o,t,e);var fe=S.seq=(o,t,e)=>new ks(o,t,e);S.union=(o,t,e)=>new li(o,t,e);S.unionLayoutDiscriminator=(o,t)=>new mn(o,t);var Xt=S.blob=(o,t)=>new Is(o,t);S.cstr=o=>new Rs(o);S.utf8=(o,t)=>new Ts(o,t);S.constant=(o,t)=>new Cs(o,t);var tn={};Object.defineProperty(tn,"__esModule",{value:!0});function Ma(o){{const t=Buffer.from(o);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var xa=tn.toBigIntLE=Ma;function _a(o){{const t=o.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}tn.toBigIntBE=_a;function Sa(o,t){{const e=o.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var ka=tn.toBufferLE=Sa;function Aa(o,t){{const e=o.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}tn.toBufferBE=Aa;class Ea extends TypeError{constructor(t,e){let r;const{message:a,...i}=t,{path:u}=t,v=u.length===0?a:"At path: "+u.join(".")+" -- "+a;super(v),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var w;return(w=r)!=null?w:r=[t,...e()]}}}function Ba(o){return je(o)&&typeof o[Symbol.iterator]=="function"}function je(o){return typeof o=="object"&&o!=null}function Se(o){return typeof o=="string"?JSON.stringify(o):""+o}function Ia(o){const{done:t,value:e}=o.next();return t?void 0:e}function Ra(o,t,e,r){if(o===!0)return;o===!1?o={}:typeof o=="string"&&(o={message:o});const{path:a,branch:i}=t,{type:u}=e,{refinement:v,message:w="Expected a value of type `"+u+"`"+(v?" with refinement `"+v+"`":"")+", but received: `"+Se(r)+"`"}=o;return{value:r,type:u,refinement:v,key:a[a.length-1],path:a,branch:i,...o,message:w}}function*Ni(o,t,e,r){Ba(o)||(o=[o]);for(const a of o){const i=Ra(a,t,e,r);i&&(yield i)}}function*gi(o,t,e={}){const{path:r=[],branch:a=[o],coerce:i=!1,mask:u=!1}=e,v={path:r,branch:a};if(i&&(o=t.coercer(o,v),u&&t.type!=="type"&&je(t.schema)&&je(o)&&!Array.isArray(o)))for(const M in o)t.schema[M]===void 0&&delete o[M];let w=!0;for(const M of t.validator(o,v))w=!1,yield[M,void 0];for(let[M,b,A]of t.entries(o,v)){const L=gi(b,A,{path:M===void 0?r:[...r,M],branch:M===void 0?a:[...a,b],coerce:i,mask:u});for(const k of L)k[0]?(w=!1,yield[k[0],void 0]):i&&(b=k[1],M===void 0?o=b:o instanceof Map?o.set(M,b):o instanceof Set?o.add(b):je(o)&&(o[M]=b))}if(w)for(const M of t.refiner(o,v))w=!1,yield[M,void 0];w&&(yield[void 0,o])}let Re=class{constructor(t){const{type:e,schema:r,validator:a,refiner:i,coercer:u=w=>w,entries:v=function*(){}}=t;this.type=e,this.schema=r,this.entries=v,this.coercer=u,a?this.validator=(w,M)=>{const b=a(w,M);return Ni(b,M,this,w)}:this.validator=()=>[],i?this.refiner=(w,M)=>{const b=i(w,M);return Ni(b,M,this,w)}:this.refiner=()=>[]}assert(t){return Ta(t,this)}create(t){return D(t,this)}is(t){return Ps(t,this)}mask(t){return Ca(t,this)}validate(t,e={}){return en(t,this,e)}};function Ta(o,t){const e=en(o,t);if(e[0])throw e[0]}function D(o,t){const e=en(o,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Ca(o,t){const e=en(o,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Ps(o,t){return!en(o,t)[0]}function en(o,t,e={}){const r=gi(o,t,e),a=Ia(r);return a[0]?[new Ea(a[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,a[1]]}function br(o,t){return new Re({type:o,schema:null,validator:t})}function Pa(){return br("any",()=>!0)}function $(o){return new Re({type:"array",schema:o,*entries(t){if(o&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,o]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Se(t)}})}function Ee(){return br("boolean",o=>typeof o=="boolean")}function mi(o){return br("instance",t=>t instanceof o||"Expected a `"+o.name+"` instance, but received: "+Se(t))}function Jt(o){const t=Se(o),e=typeof o;return new Re({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?o:null,validator(r){return r===o||"Expected the literal `"+t+"`, but received: "+Se(r)}})}function La(){return br("never",()=>!1)}function H(o){return new Re({...o,validator:(t,e)=>t===null||o.validator(t,e),refiner:(t,e)=>t===null||o.refiner(t,e)})}function x(){return br("number",o=>typeof o=="number"&&!isNaN(o)||"Expected a number, but received: "+Se(o))}function nt(o){return new Re({...o,validator:(t,e)=>t===void 0||o.validator(t,e),refiner:(t,e)=>t===void 0||o.refiner(t,e)})}function Ls(o,t){return new Re({type:"record",schema:null,*entries(e){if(je(e))for(const r in e){const a=e[r];yield[r,r,o],yield[r,a,t]}},validator(e){return je(e)||"Expected an object, but received: "+Se(e)}})}function F(){return br("string",o=>typeof o=="string"||"Expected a string, but received: "+Se(o))}function vi(o){const t=La();return new Re({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(o.length,e.length);for(let a=0;a<r;a++)yield[a,e[a],o[a]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+Se(e)}})}function O(o){const t=Object.keys(o);return new Re({type:"type",schema:o,*entries(e){if(je(e))for(const r of t)yield[r,e[r],o[r]]},validator(e){return je(e)||"Expected an object, but received: "+Se(e)}})}function de(o){const t=o.map(e=>e.type).join(" | ");return new Re({type:"union",schema:null,validator(e,r){const a=[];for(const i of o){const[...u]=gi(e,i,r),[v]=u;if(v[0])for(const[w]of u)w&&a.push(w);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Se(e),...a]}})}function rn(){return br("unknown",()=>!0)}function nn(o,t,e){return new Re({...o,coercer:(r,a)=>Ps(r,t)?o.coercer(e(r,a),a):o.coercer(r,a)})}var an,Oa=new Uint8Array(16);function Os(){if(!an&&(an=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!an))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return an(Oa)}const Na=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sn(o){return typeof o=="string"&&Na.test(o)}var ee=[];for(var Ln=0;Ln<256;++Ln)ee.push((Ln+256).toString(16).substr(1));function kn(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ee[o[t+0]]+ee[o[t+1]]+ee[o[t+2]]+ee[o[t+3]]+"-"+ee[o[t+4]]+ee[o[t+5]]+"-"+ee[o[t+6]]+ee[o[t+7]]+"-"+ee[o[t+8]]+ee[o[t+9]]+"-"+ee[o[t+10]]+ee[o[t+11]]+ee[o[t+12]]+ee[o[t+13]]+ee[o[t+14]]+ee[o[t+15]]).toLowerCase();if(!Sn(e))throw TypeError("Stringified UUID is invalid");return e}var qi,On,Nn=0,qn=0;function qa(o,t,e){var r=t&&e||0,a=t||new Array(16);o=o||{};var i=o.node||qi,u=o.clockseq!==void 0?o.clockseq:On;if(i==null||u==null){var v=o.random||(o.rng||Os)();i==null&&(i=qi=[v[0]|1,v[1],v[2],v[3],v[4],v[5]]),u==null&&(u=On=(v[6]<<8|v[7])&16383)}var w=o.msecs!==void 0?o.msecs:Date.now(),M=o.nsecs!==void 0?o.nsecs:qn+1,b=w-Nn+(M-qn)/1e4;if(b<0&&o.clockseq===void 0&&(u=u+1&16383),(b<0||w>Nn)&&o.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Nn=w,qn=M,On=u,w+=122192928e5;var A=((w&268435455)*1e4+M)%4294967296;a[r++]=A>>>24&255,a[r++]=A>>>16&255,a[r++]=A>>>8&255,a[r++]=A&255;var L=w/4294967296*1e4&268435455;a[r++]=L>>>8&255,a[r++]=L&255,a[r++]=L>>>24&15|16,a[r++]=L>>>16&255,a[r++]=u>>>8|128,a[r++]=u&255;for(var k=0;k<6;++k)a[r+k]=i[k];return t||kn(a)}function Ns(o){if(!Sn(o))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(o.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(o.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(o.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(o.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(o.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Ua(o){o=unescape(encodeURIComponent(o));for(var t=[],e=0;e<o.length;++e)t.push(o.charCodeAt(e));return t}var Fa="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ka="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function qs(o,t,e){function r(a,i,u,v){if(typeof a=="string"&&(a=Ua(a)),typeof i=="string"&&(i=Ns(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var w=new Uint8Array(16+a.length);if(w.set(i),w.set(a,i.length),w=e(w),w[6]=w[6]&15|t,w[8]=w[8]&63|128,u){v=v||0;for(var M=0;M<16;++M)u[v+M]=w[M];return u}return kn(w)}try{r.name=o}catch{}return r.DNS=Fa,r.URL=Ka,r}function Da(o){if(typeof o=="string"){var t=unescape(encodeURIComponent(o));o=new Uint8Array(t.length);for(var e=0;e<t.length;++e)o[e]=t.charCodeAt(e)}return za(Ha($a(o),o.length*8))}function za(o){for(var t=[],e=o.length*32,r="0123456789abcdef",a=0;a<e;a+=8){var i=o[a>>5]>>>a%32&255,u=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(u)}return t}function Us(o){return(o+64>>>9<<4)+14+1}function Ha(o,t){o[t>>5]|=128<<t%32,o[Us(t)-1]=t;for(var e=1732584193,r=-271733879,a=-1732584194,i=271733878,u=0;u<o.length;u+=16){var v=e,w=r,M=a,b=i;e=se(e,r,a,i,o[u],7,-680876936),i=se(i,e,r,a,o[u+1],12,-389564586),a=se(a,i,e,r,o[u+2],17,606105819),r=se(r,a,i,e,o[u+3],22,-1044525330),e=se(e,r,a,i,o[u+4],7,-176418897),i=se(i,e,r,a,o[u+5],12,1200080426),a=se(a,i,e,r,o[u+6],17,-1473231341),r=se(r,a,i,e,o[u+7],22,-45705983),e=se(e,r,a,i,o[u+8],7,1770035416),i=se(i,e,r,a,o[u+9],12,-1958414417),a=se(a,i,e,r,o[u+10],17,-42063),r=se(r,a,i,e,o[u+11],22,-1990404162),e=se(e,r,a,i,o[u+12],7,1804603682),i=se(i,e,r,a,o[u+13],12,-40341101),a=se(a,i,e,r,o[u+14],17,-1502002290),r=se(r,a,i,e,o[u+15],22,1236535329),e=oe(e,r,a,i,o[u+1],5,-165796510),i=oe(i,e,r,a,o[u+6],9,-1069501632),a=oe(a,i,e,r,o[u+11],14,643717713),r=oe(r,a,i,e,o[u],20,-373897302),e=oe(e,r,a,i,o[u+5],5,-701558691),i=oe(i,e,r,a,o[u+10],9,38016083),a=oe(a,i,e,r,o[u+15],14,-660478335),r=oe(r,a,i,e,o[u+4],20,-405537848),e=oe(e,r,a,i,o[u+9],5,568446438),i=oe(i,e,r,a,o[u+14],9,-1019803690),a=oe(a,i,e,r,o[u+3],14,-187363961),r=oe(r,a,i,e,o[u+8],20,1163531501),e=oe(e,r,a,i,o[u+13],5,-1444681467),i=oe(i,e,r,a,o[u+2],9,-51403784),a=oe(a,i,e,r,o[u+7],14,1735328473),r=oe(r,a,i,e,o[u+12],20,-1926607734),e=ae(e,r,a,i,o[u+5],4,-378558),i=ae(i,e,r,a,o[u+8],11,-2022574463),a=ae(a,i,e,r,o[u+11],16,1839030562),r=ae(r,a,i,e,o[u+14],23,-35309556),e=ae(e,r,a,i,o[u+1],4,-1530992060),i=ae(i,e,r,a,o[u+4],11,1272893353),a=ae(a,i,e,r,o[u+7],16,-155497632),r=ae(r,a,i,e,o[u+10],23,-1094730640),e=ae(e,r,a,i,o[u+13],4,681279174),i=ae(i,e,r,a,o[u],11,-358537222),a=ae(a,i,e,r,o[u+3],16,-722521979),r=ae(r,a,i,e,o[u+6],23,76029189),e=ae(e,r,a,i,o[u+9],4,-640364487),i=ae(i,e,r,a,o[u+12],11,-421815835),a=ae(a,i,e,r,o[u+15],16,530742520),r=ae(r,a,i,e,o[u+2],23,-995338651),e=ce(e,r,a,i,o[u],6,-198630844),i=ce(i,e,r,a,o[u+7],10,1126891415),a=ce(a,i,e,r,o[u+14],15,-1416354905),r=ce(r,a,i,e,o[u+5],21,-57434055),e=ce(e,r,a,i,o[u+12],6,1700485571),i=ce(i,e,r,a,o[u+3],10,-1894986606),a=ce(a,i,e,r,o[u+10],15,-1051523),r=ce(r,a,i,e,o[u+1],21,-2054922799),e=ce(e,r,a,i,o[u+8],6,1873313359),i=ce(i,e,r,a,o[u+15],10,-30611744),a=ce(a,i,e,r,o[u+6],15,-1560198380),r=ce(r,a,i,e,o[u+13],21,1309151649),e=ce(e,r,a,i,o[u+4],6,-145523070),i=ce(i,e,r,a,o[u+11],10,-1120210379),a=ce(a,i,e,r,o[u+2],15,718787259),r=ce(r,a,i,e,o[u+9],21,-343485551),e=Ge(e,v),r=Ge(r,w),a=Ge(a,M),i=Ge(i,b)}return[e,r,a,i]}function $a(o){if(o.length===0)return[];for(var t=o.length*8,e=new Uint32Array(Us(t)),r=0;r<t;r+=8)e[r>>5]|=(o[r/8]&255)<<r%32;return e}function Ge(o,t){var e=(o&65535)+(t&65535),r=(o>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Wa(o,t){return o<<t|o>>>32-t}function An(o,t,e,r,a,i){return Ge(Wa(Ge(Ge(t,o),Ge(r,i)),a),e)}function se(o,t,e,r,a,i,u){return An(t&e|~t&r,o,t,a,i,u)}function oe(o,t,e,r,a,i,u){return An(t&r|e&~r,o,t,a,i,u)}function ae(o,t,e,r,a,i,u){return An(t^e^r,o,t,a,i,u)}function ce(o,t,e,r,a,i,u){return An(e^(t|~r),o,t,a,i,u)}var Ga=qs("v3",48,Da);const ja=Ga;function Va(o,t,e){o=o||{};var r=o.random||(o.rng||Os)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var a=0;a<16;++a)t[e+a]=r[a];return t}return kn(r)}function Za(o,t,e,r){switch(o){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Un(o,t){return o<<t|o>>>32-t}function Ja(o){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){var r=unescape(encodeURIComponent(o));o=[];for(var a=0;a<r.length;++a)o.push(r.charCodeAt(a))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);for(var i=o.length/4+2,u=Math.ceil(i/16),v=new Array(u),w=0;w<u;++w){for(var M=new Uint32Array(16),b=0;b<16;++b)M[b]=o[w*64+b*4]<<24|o[w*64+b*4+1]<<16|o[w*64+b*4+2]<<8|o[w*64+b*4+3];v[w]=M}v[u-1][14]=(o.length-1)*8/Math.pow(2,32),v[u-1][14]=Math.floor(v[u-1][14]),v[u-1][15]=(o.length-1)*8&4294967295;for(var A=0;A<u;++A){for(var L=new Uint32Array(80),k=0;k<16;++k)L[k]=v[A][k];for(var E=16;E<80;++E)L[E]=Un(L[E-3]^L[E-8]^L[E-14]^L[E-16],1);for(var B=e[0],_=e[1],q=e[2],K=e[3],C=e[4],N=0;N<80;++N){var U=Math.floor(N/20),P=Un(B,5)+Za(U,_,q,K)+C+t[U]+L[N]>>>0;C=K,K=q,q=Un(_,30)>>>0,_=B,B=P}e[0]=e[0]+B>>>0,e[1]=e[1]+_>>>0,e[2]=e[2]+q>>>0,e[3]=e[3]+K>>>0,e[4]=e[4]+C>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Xa=qs("v5",80,Ja);const Ya=Xa,Qa="00000000-0000-0000-0000-000000000000";function tc(o){if(!Sn(o))throw TypeError("Invalid UUID");return parseInt(o.substr(14,1),16)}const ec=Object.freeze(Object.defineProperty({__proto__:null,NIL:Qa,parse:Ns,stringify:kn,v1:qa,v3:ja,v4:Va,v5:Ya,validate:Sn,version:tc},Symbol.toStringTag,{value:"Module"})),Fs=Oe(ec),rc=Fs.v4,nc=function(o,t,e,r){if(typeof o!="string")throw new TypeError(o+" must be a string");r=r||{};const a=typeof r.version=="number"?r.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const i={method:o};if(a===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return rc()};i.id=u(i,r)}else a===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var ic=nc;const sc=Fs.v4,oc=ic,Zr=function(o,t){if(!(this instanceof Zr))return new Zr(o,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return sc()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=o};var ac=Zr;Zr.prototype.request=function(o,t,e,r){const a=this;let i=null;const u=Array.isArray(o)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&o&&typeof o=="object"&&typeof t=="function")r=t,i=o;else{typeof e=="function"&&(r=e,e=void 0);const M=typeof r=="function";try{i=oc(o,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(M)return r(b);throw b}if(!M)return i}let w;try{w=JSON.stringify(i,this.options.replacer)}catch(M){return r(M)}return this.callServer(w,function(M,b){a._parseResponse(M,b,r)}),i};Zr.prototype._parseResponse=function(o,t,e){if(o){e(o);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(a){return e(a)}if(e.length===3)if(Array.isArray(r)){const a=function(u){return typeof u.error<"u"},i=function(u){return!a(u)};return e(null,r.filter(a),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const cc=Xr(ac);var Ks={},Ds={exports:{}};(function(o){function t(e){return e&&e.__esModule?e:{default:e}}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports})(Ds);var yi=Ds.exports;const uc=Oe(go),hc=Oe(mo),wi=Oe(vo),bi=Oe(yo),zs=Oe(wo),Hs=Oe(bo),$s=Oe(Mo);var Fn={exports:{}},Ui;function Ws(){return Ui||(Ui=1,function(o){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function a(w,M,b){this.fn=w,this.context=M,this.once=b||!1}function i(w,M,b,A,L){if(typeof b!="function")throw new TypeError("The listener must be a function");var k=new a(b,A||w,L),E=e?e+M:M;return w._events[E]?w._events[E].fn?w._events[E]=[w._events[E],k]:w._events[E].push(k):(w._events[E]=k,w._eventsCount++),w}function u(w,M){--w._eventsCount===0?w._events=new r:delete w._events[M]}function v(){this._events=new r,this._eventsCount=0}v.prototype.eventNames=function(){var M=[],b,A;if(this._eventsCount===0)return M;for(A in b=this._events)t.call(b,A)&&M.push(e?A.slice(1):A);return Object.getOwnPropertySymbols?M.concat(Object.getOwnPropertySymbols(b)):M},v.prototype.listeners=function(M){var b=e?e+M:M,A=this._events[b];if(!A)return[];if(A.fn)return[A.fn];for(var L=0,k=A.length,E=new Array(k);L<k;L++)E[L]=A[L].fn;return E},v.prototype.listenerCount=function(M){var b=e?e+M:M,A=this._events[b];return A?A.fn?1:A.length:0},v.prototype.emit=function(M,b,A,L,k,E){var B=e?e+M:M;if(!this._events[B])return!1;var _=this._events[B],q=arguments.length,K,C;if(_.fn){switch(_.once&&this.removeListener(M,_.fn,void 0,!0),q){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,b),!0;case 3:return _.fn.call(_.context,b,A),!0;case 4:return _.fn.call(_.context,b,A,L),!0;case 5:return _.fn.call(_.context,b,A,L,k),!0;case 6:return _.fn.call(_.context,b,A,L,k,E),!0}for(C=1,K=new Array(q-1);C<q;C++)K[C-1]=arguments[C];_.fn.apply(_.context,K)}else{var N=_.length,U;for(C=0;C<N;C++)switch(_[C].once&&this.removeListener(M,_[C].fn,void 0,!0),q){case 1:_[C].fn.call(_[C].context);break;case 2:_[C].fn.call(_[C].context,b);break;case 3:_[C].fn.call(_[C].context,b,A);break;case 4:_[C].fn.call(_[C].context,b,A,L);break;default:if(!K)for(U=1,K=new Array(q-1);U<q;U++)K[U-1]=arguments[U];_[C].fn.apply(_[C].context,K)}}return!0},v.prototype.on=function(M,b,A){return i(this,M,b,A,!1)},v.prototype.once=function(M,b,A){return i(this,M,b,A,!0)},v.prototype.removeListener=function(M,b,A,L){var k=e?e+M:M;if(!this._events[k])return this;if(!b)return u(this,k),this;var E=this._events[k];if(E.fn)E.fn===b&&(!L||E.once)&&(!A||E.context===A)&&u(this,k);else{for(var B=0,_=[],q=E.length;B<q;B++)(E[B].fn!==b||L&&!E[B].once||A&&E[B].context!==A)&&_.push(E[B]);_.length?this._events[k]=_.length===1?_[0]:_:u(this,k)}return this},v.prototype.removeAllListeners=function(M){var b;return M?(b=e?e+M:M,this._events[b]&&u(this,b)):(this._events=new r,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=e,v.EventEmitter=v,o.exports=v}(Fn)),Fn.exports}var _r={},Fi;function fc(){if(Fi)return _r;Fi=1;var o=yi;Object.defineProperty(_r,"__esModule",{value:!0}),_r.DefaultDataPack=void 0,_r.createError=i;var t=o(wi),e=o(bi),r=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),a=function(){function u(){(0,t.default)(this,u)}return(0,e.default)(u,[{key:"encode",value:function(w){return JSON.stringify(w)}},{key:"decode",value:function(w){return JSON.parse(w)}}]),u}();_r.DefaultDataPack=a;function i(u,v){var w={code:u,message:r.get(u)||"Internal Server Error"};return v&&(w.data=v),w}return _r}(function(o){var t=yi;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=t(xo),r=t(uc),a=t(hc),i=t(wi),u=t(bi),v=t(zs),w=t(Hs),M=t($s),b=Ws(),A=fc();function L(_){var q=k();return function(){var C=(0,M.default)(_),N;if(q){var U=(0,M.default)(this).constructor;N=Reflect.construct(C,arguments,U)}else N=C.apply(this,arguments);return(0,w.default)(this,N)}}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var E=function(_,q){var K={};for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&q.indexOf(C)<0&&(K[C]=_[C]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,C=Object.getOwnPropertySymbols(_);N<C.length;N++)q.indexOf(C[N])<0&&Object.prototype.propertyIsEnumerable.call(_,C[N])&&(K[C[N]]=_[C[N]]);return K},B=function(_){(0,v.default)(K,_);var q=L(K);function K(C){var N,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},G=arguments.length>3?arguments[3]:void 0,z=arguments.length>4?arguments[4]:void 0;(0,i.default)(this,K);var Q=P.autoconnect,Wt=Q===void 0?!0:Q,V=P.reconnect,Vt=V===void 0?!0:V,g=P.reconnect_interval,n=g===void 0?1e3:g,c=P.max_reconnects,h=c===void 0?5:c,p=E(P,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return N=q.call(this),N.webSocketFactory=C,N.queue={},N.rpc_id=0,N.address=U,N.autoconnect=Wt,N.ready=!1,N.reconnect=Vt,N.reconnect_timer_id=void 0,N.reconnect_interval=n,N.max_reconnects=h,N.rest_options=p,N.current_reconnects=0,N.generate_request_id=G||function(){return++N.rpc_id},z?N.dataPack=z:N.dataPack=new A.DefaultDataPack,N.autoconnect&&N._connect(N.address,Object.assign({autoconnect:N.autoconnect,reconnect:N.reconnect,reconnect_interval:N.reconnect_interval,max_reconnects:N.max_reconnects},N.rest_options)),N}return(0,u.default)(K,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(N,U,P,G){var z=this;return!G&&(0,a.default)(P)==="object"&&(G=P,P=null),new Promise(function(Q,Wt){if(!z.ready)return Wt(new Error("socket not ready"));var V=z.generate_request_id(N,U),Vt={jsonrpc:"2.0",method:N,params:U||void 0,id:V};z.socket.send(z.dataPack.encode(Vt),G,function(g){if(g)return Wt(g);z.queue[V]={promise:[Q,Wt]},P&&(z.queue[V].timeout=setTimeout(function(){delete z.queue[V],Wt(new Error("reply timeout"))},P))})})}},{key:"login",value:function(){var C=(0,r.default)(e.default.mark(function U(P){var G;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.call("rpc.login",P);case 2:if(G=Q.sent,G){Q.next=5;break}throw new Error("authentication failed");case 5:return Q.abrupt("return",G);case 6:case"end":return Q.stop()}},U,this)}));function N(U){return C.apply(this,arguments)}return N}()},{key:"listMethods",value:function(){var C=(0,r.default)(e.default.mark(function U(){return e.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,this.call("__listMethods");case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},U,this)}));function N(){return C.apply(this,arguments)}return N}()},{key:"notify",value:function(N,U){var P=this;return new Promise(function(G,z){if(!P.ready)return z(new Error("socket not ready"));var Q={jsonrpc:"2.0",method:N,params:U};P.socket.send(P.dataPack.encode(Q),function(Wt){if(Wt)return z(Wt);G()})})}},{key:"subscribe",value:function(){var C=(0,r.default)(e.default.mark(function U(P){var G;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return typeof P=="string"&&(P=[P]),Q.next=3,this.call("rpc.on",P);case 3:if(G=Q.sent,!(typeof P=="string"&&G[P]!=="ok")){Q.next=6;break}throw new Error("Failed subscribing to an event '"+P+"' with: "+G[P]);case 6:return Q.abrupt("return",G);case 7:case"end":return Q.stop()}},U,this)}));function N(U){return C.apply(this,arguments)}return N}()},{key:"unsubscribe",value:function(){var C=(0,r.default)(e.default.mark(function U(P){var G;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return typeof P=="string"&&(P=[P]),Q.next=3,this.call("rpc.off",P);case 3:if(G=Q.sent,!(typeof P=="string"&&G[P]!=="ok")){Q.next=6;break}throw new Error("Failed unsubscribing from an event with: "+G);case 6:return Q.abrupt("return",G);case 7:case"end":return Q.stop()}},U,this)}));function N(U){return C.apply(this,arguments)}return N}()},{key:"close",value:function(N,U){this.socket.close(N||1e3,U)}},{key:"_connect",value:function(N,U){var P=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(N,U),this.socket.addEventListener("open",function(){P.ready=!0,P.emit("open"),P.current_reconnects=0}),this.socket.addEventListener("message",function(G){var z=G.data;z instanceof ArrayBuffer&&(z=Buffer.from(z).toString());try{z=P.dataPack.decode(z)}catch{return}if(z.notification&&P.listeners(z.notification).length){if(!Object.keys(z.params).length)return P.emit(z.notification);var Q=[z.notification];if(z.params.constructor===Object)Q.push(z.params);else for(var Wt=0;Wt<z.params.length;Wt++)Q.push(z.params[Wt]);return Promise.resolve().then(function(){P.emit.apply(P,Q)})}if(!P.queue[z.id])return z.method?Promise.resolve().then(function(){P.emit(z.method,z==null?void 0:z.params)}):void 0;"error"in z=="result"in z&&P.queue[z.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),P.queue[z.id].timeout&&clearTimeout(P.queue[z.id].timeout),z.error?P.queue[z.id].promise[1](z.error):P.queue[z.id].promise[0](z.result),delete P.queue[z.id]}),this.socket.addEventListener("error",function(G){return P.emit("error",G)}),this.socket.addEventListener("close",function(G){var z=G.code,Q=G.reason;P.ready&&setTimeout(function(){return P.emit("close",z,Q)},0),P.ready=!1,P.socket=void 0,z!==1e3&&(P.current_reconnects++,P.reconnect&&(P.max_reconnects>P.current_reconnects||P.max_reconnects===0)&&(P.reconnect_timer_id=setTimeout(function(){return P._connect(N,U)},P.reconnect_interval)))})}}]),K}(b.EventEmitter);o.default=B})(Ks);const lc=Xr(Ks);var Gs={};(function(o){var t=yi;Object.defineProperty(o,"__esModule",{value:!0}),o.default=A;var e=t(wi),r=t(bi),a=t(zs),i=t(Hs),u=t($s),v=Ws();function w(L){var k=M();return function(){var B=(0,u.default)(L),_;if(k){var q=(0,u.default)(this).constructor;_=Reflect.construct(B,arguments,q)}else _=B.apply(this,arguments);return(0,i.default)(this,_)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(L){(0,a.default)(E,L);var k=w(E);function E(B,_,q){var K;return(0,e.default)(this,E),K=k.call(this),K.socket=new window.WebSocket(B,q),K.socket.onopen=function(){return K.emit("open")},K.socket.onmessage=function(C){return K.emit("message",C.data)},K.socket.onerror=function(C){return K.emit("error",C)},K.socket.onclose=function(C){K.emit("close",C.code,C.reason)},K}return(0,r.default)(E,[{key:"send",value:function(_,q,K){var C=K||q;try{this.socket.send(_),C()}catch(N){C(N)}}},{key:"close",value:function(_,q){this.socket.close(_,q)}},{key:"addEventListener",value:function(_,q,K){this.socket.addEventListener(_,q,K)}}]),E}(v.EventEmitter);function A(L,k){return new b(L,k)}})(Gs);const dc=Xr(Gs),Ki=()=>{const o=Qr.utils.randomPrivateKey(),t=Wn(o),e=new Uint8Array(64);return e.set(o),e.set(t,32),{publicKey:t,secretKey:e}},Wn=Qr.getPublicKey;function Di(o){try{return Qr.ExtendedPoint.fromHex(o),!0}catch{return!1}}const pc=(o,t)=>Qr.sign(o,t.slice(0,32)),gc=Qr.verify,Ir=o=>Kt.Buffer.isBuffer(o)?o:o instanceof Uint8Array?Kt.Buffer.from(o.buffer,o.byteOffset,o.byteLength):Kt.Buffer.from(o);class mc{constructor(t){Object.assign(this,t)}encode(){return Kt.Buffer.from(ps(hn,this))}static decode(t){return gs(hn,this,t)}static decodeUnchecked(t){return us(hn,this,t)}}const hn=new Map;var js;let Vs;const vc=32,Ae=32;function yc(o){return o._bn!==void 0}let zi=1;Vs=Symbol.toStringTag;class et extends mc{constructor(t){if(super({}),this._bn=void 0,yc(t))this._bn=t._bn;else{if(typeof t=="string"){const e=jt.decode(t);if(e.length!=Ae)throw new Error("Invalid public key input");this._bn=new Oi(e)}else this._bn=new Oi(t);if(this._bn.byteLength()>Ae)throw new Error("Invalid public key input")}}static unique(){const t=new et(zi);return zi+=1,new et(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return jt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Kt.Buffer);if(t.length===Ae)return t;const e=Kt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Vs](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const a=Kt.Buffer.concat([t.toBuffer(),Kt.Buffer.from(e),r.toBuffer()]),i=Ti(a);return new et(i)}static createProgramAddressSync(t,e){let r=Kt.Buffer.alloc(0);t.forEach(function(i){if(i.length>vc)throw new TypeError("Max seed length exceeded");r=Kt.Buffer.concat([r,Ir(i)])}),r=Kt.Buffer.concat([r,e.toBuffer(),Kt.Buffer.from("ProgramDerivedAddress")]);const a=Ti(r);if(Di(a))throw new Error("Invalid seeds, address must fall off the curve");return new et(a)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,a;for(;r!=0;){try{const i=t.concat(Kt.Buffer.from([r]));a=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[a,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new et(t);return Di(e.toBytes())}}js=et;et.default=new js("11111111111111111111111111111111");hn.set(et,{kind:"struct",fields:[["_bn","u256"]]});new et("BPFLoader1111111111111111111111111111111111");const Er=1232,Zs=127,Gn=64;class Js extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Js.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Xs extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Xs.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Gr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Gr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class vn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const a=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:a(i.programId),accountKeyIndexes:i.keys.map(u=>a(u.pubkey)),data:i.data}))}}const Dt=(o="publicKey")=>Xt(32,o),Ar=(o="string")=>{const t=J([tt("length"),tt("lengthPadding"),Xt(yr(tt(),-8),"chars")],o),e=t.decode.bind(t),r=t.encode.bind(t),a=t;return a.decode=(i,u)=>e(i,u).chars.toString(),a.encode=(i,u,v)=>{const w={chars:Kt.Buffer.from(i,"utf8")};return r(w,u,v)},a.alloc=i=>tt().span+tt().span+Kt.Buffer.from(i,"utf8").length,a},wc=(o="authorized")=>J([Dt("staker"),Dt("withdrawer")],o),bc=(o="lockup")=>J([ge("unixTimestamp"),ge("epoch"),Dt("custodian")],o),Mc=(o="voteInit")=>J([Dt("nodePubkey"),Dt("authorizedVoter"),Dt("authorizedWithdrawer"),$t("commission")],o),xc=(o="voteAuthorizeWithSeedArgs")=>J([tt("voteAuthorizationType"),Dt("currentAuthorityDerivedKeyOwnerPubkey"),Ar("currentAuthorityDerivedKeySeed"),Dt("newAuthorized")],o);function ye(o){let t=0,e=0;for(;;){let r=o.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function we(o,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){o.push(r);break}else r|=128,o.push(r)}}function Qt(o,t){if(!o)throw new Error(t||"Assertion failed")}class En{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,a=u=>{const v=u.toBase58();let w=r.get(v);return w===void 0&&(w={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(v,w)),w},i=a(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){a(u.programId).isInvoked=!0;for(const v of u.keys){const w=a(v.pubkey);w.isSigner||(w.isSigner=v.isSigner),w.isWritable||(w.isWritable=v.isWritable)}}return new En(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Qt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,w])=>w.isSigner&&w.isWritable),r=t.filter(([,w])=>w.isSigner&&!w.isWritable),a=t.filter(([,w])=>!w.isSigner&&w.isWritable),i=t.filter(([,w])=>!w.isSigner&&!w.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Qt(e.length>0,"Expected at least one writable signer key");const[w]=e[0];Qt(w===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const v=[...e.map(([w])=>new et(w)),...r.map(([w])=>new et(w)),...a.map(([w])=>new et(w)),...i.map(([w])=>new et(w))];return[u,v]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[a,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&a.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:a},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,a=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const v=new et(i),w=t.findIndex(M=>M.equals(v));w>=0&&(Qt(w<256,"Max lookup table index exceeded"),r.push(w),a.push(v),this.keyMetaMap.delete(i))}return[r,a]}}class Ve{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new et(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:jt.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new vn(this.staticAccountKeys)}static compile(t){const e=En.compile(t.instructions,t.payerKey),[r,a]=e.getMessageComponents(),u=new vn(a).compileInstructions(t.instructions).map(v=>({programIdIndex:v.programIdIndex,accounts:v.accountKeyIndexes,data:jt.encode(v.data)}));return new Ve({header:r,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];we(e,t);const r=this.instructions.map(A=>{const{accounts:L,programIdIndex:k}=A,E=Array.from(jt.decode(A.data));let B=[];we(B,L.length);let _=[];return we(_,E.length),{programIdIndex:k,keyIndicesCount:Kt.Buffer.from(B),keyIndices:L,dataLength:Kt.Buffer.from(_),data:E}});let a=[];we(a,r.length);let i=Kt.Buffer.alloc(Er);Kt.Buffer.from(a).copy(i);let u=a.length;r.forEach(A=>{const k=J([$t("programIdIndex"),Xt(A.keyIndicesCount.length,"keyIndicesCount"),fe($t("keyIndex"),A.keyIndices.length,"keyIndices"),Xt(A.dataLength.length,"dataLength"),fe($t("userdatum"),A.data.length,"data")]).encode(A,i,u);u+=k}),i=i.slice(0,u);const v=J([Xt(1,"numRequiredSignatures"),Xt(1,"numReadonlySignedAccounts"),Xt(1,"numReadonlyUnsignedAccounts"),Xt(e.length,"keyCount"),fe(Dt("key"),t,"keys"),Dt("recentBlockhash")]),w={numRequiredSignatures:Kt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Kt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Kt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Kt.Buffer.from(e),keys:this.accountKeys.map(A=>Ir(A.toBytes())),recentBlockhash:jt.decode(this.recentBlockhash)};let M=Kt.Buffer.alloc(2048);const b=v.encode(w,M);return i.copy(M,b),M.slice(0,b+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Zs))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const a=e.shift(),i=e.shift(),u=ye(e);let v=[];for(let L=0;L<u;L++){const k=e.slice(0,Ae);e=e.slice(Ae),v.push(new et(Kt.Buffer.from(k)))}const w=e.slice(0,Ae);e=e.slice(Ae);const M=ye(e);let b=[];for(let L=0;L<M;L++){const k=e.shift(),E=ye(e),B=e.slice(0,E);e=e.slice(E);const _=ye(e),q=e.slice(0,_),K=jt.encode(Kt.Buffer.from(q));e=e.slice(_),b.push({programIdIndex:k,accounts:B,data:K})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:i},recentBlockhash:jt.encode(Kt.Buffer.from(w)),accountKeys:v,instructions:b};return new Ve(A)}}class yn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new vn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const a=t-r,i=this.addressTableLookups.reduce((u,v)=>u+v.writableIndexes.length,0);return a<i}else if(t>=this.header.numRequiredSignatures){const a=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return a<u}else{const a=e-this.header.numReadonlySignedAccounts;return t<a}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const a=t.find(i=>i.key.equals(r.accountKey));if(!a)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<a.state.addresses.length)e.writable.push(a.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<a.state.addresses.length)e.readonly.push(a.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=En.compile(t.instructions,t.payerKey),r=new Array,a={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const A=e.extractTableLookup(b);if(A!==void 0){const[L,{writable:k,readonly:E}]=A;r.push(L),a.writable.push(...k),a.readonly.push(...E)}}const[u,v]=e.getMessageComponents(),M=new vn(v,a).compileInstructions(t.instructions);return new yn({header:u,staticAccountKeys:v,recentBlockhash:t.recentBlockhash,compiledInstructions:M,addressTableLookups:r})}serialize(){const t=Array();we(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();we(r,this.compiledInstructions.length);const a=this.serializeAddressTableLookups(),i=Array();we(i,this.addressTableLookups.length);const u=J([$t("prefix"),J([$t("numRequiredSignatures"),$t("numReadonlySignedAccounts"),$t("numReadonlyUnsignedAccounts")],"header"),Xt(t.length,"staticAccountKeysLength"),fe(Dt(),this.staticAccountKeys.length,"staticAccountKeys"),Dt("recentBlockhash"),Xt(r.length,"instructionsLength"),Xt(e.length,"serializedInstructions"),Xt(i.length,"addressTableLookupsLength"),Xt(a.length,"serializedAddressTableLookups")]),v=new Uint8Array(Er),M=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:jt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:a},v);return v.slice(0,M)}serializeInstructions(){let t=0;const e=new Uint8Array(Er);for(const r of this.compiledInstructions){const a=Array();we(a,r.accountKeyIndexes.length);const i=Array();we(i,r.data.length);const u=J([$t("programIdIndex"),Xt(a.length,"encodedAccountKeyIndexesLength"),fe($t(),r.accountKeyIndexes.length,"accountKeyIndexes"),Xt(i.length,"encodedDataLength"),Xt(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(a),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Er);for(const r of this.addressTableLookups){const a=Array();we(a,r.writableIndexes.length);const i=Array();we(i,r.readonlyIndexes.length);const u=J([Dt("accountKey"),Xt(a.length,"encodedWritableIndexesLength"),fe($t(),r.writableIndexes.length,"writableIndexes"),Xt(i.length,"encodedReadonlyIndexesLength"),fe($t(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(a),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),a=r&Zs;Qt(r!==a,"Expected versioned message but received legacy message");const i=a;Qt(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},v=[],w=ye(e);for(let E=0;E<w;E++)v.push(new et(e.splice(0,Ae)));const M=jt.encode(e.splice(0,Ae)),b=ye(e),A=[];for(let E=0;E<b;E++){const B=e.shift(),_=ye(e),q=e.splice(0,_),K=ye(e),C=new Uint8Array(e.splice(0,K));A.push({programIdIndex:B,accountKeyIndexes:q,data:C})}const L=ye(e),k=[];for(let E=0;E<L;E++){const B=new et(e.splice(0,Ae)),_=ye(e),q=e.splice(0,_),K=ye(e),C=e.splice(0,K);k.push({accountKey:B,writableIndexes:q,readonlyIndexes:C})}return new yn({header:u,staticAccountKeys:v,recentBlockhash:M,compiledInstructions:A,addressTableLookups:k})}}let He=function(o){return o[o.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",o[o.PROCESSED=1]="PROCESSED",o[o.TIMED_OUT=2]="TIMED_OUT",o[o.NONCE_INVALID=3]="NONCE_INVALID",o}({});const _c=Kt.Buffer.alloc(Gn).fill(0);class Hi{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Kt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class $e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Hi(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const a=[],i=[];e.forEach(B=>{B.keys.forEach(q=>{i.push({...q})});const _=B.programId.toString();a.includes(_)||a.push(_)}),a.forEach(B=>{i.push({pubkey:new et(B),isSigner:!1,isWritable:!1})});const u=[];i.forEach(B=>{const _=B.pubkey.toString(),q=u.findIndex(K=>K.pubkey.toString()===_);q>-1?(u[q].isWritable=u[q].isWritable||B.isWritable,u[q].isSigner=u[q].isSigner||B.isSigner):u.push(B)}),u.sort(function(B,_){if(B.isSigner!==_.isSigner)return B.isSigner?-1:1;if(B.isWritable!==_.isWritable)return B.isWritable?-1:1;const q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(_.pubkey.toBase58(),"en",q)});const v=u.findIndex(B=>B.pubkey.equals(r));if(v>-1){const[B]=u.splice(v,1);B.isSigner=!0,B.isWritable=!0,u.unshift(B)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const B of this.signatures){const _=u.findIndex(q=>q.pubkey.equals(B.publicKey));if(_>-1)u[_].isSigner||(u[_].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let w=0,M=0,b=0;const A=[],L=[];u.forEach(({pubkey:B,isSigner:_,isWritable:q})=>{_?(A.push(B.toString()),w+=1,q||(M+=1)):(L.push(B.toString()),q||(b+=1))});const k=A.concat(L),E=e.map(B=>{const{data:_,programId:q}=B;return{programIdIndex:k.indexOf(q.toString()),accounts:B.keys.map(K=>k.indexOf(K.pubkey.toString())),data:jt.encode(_)}});return E.forEach(B=>{Qt(B.programIdIndex>=0),B.accounts.forEach(_=>Qt(_>=0))}),new Ve({header:{numRequiredSignatures:w,numReadonlySignedAccounts:M,numReadonlyUnsignedAccounts:b},accountKeys:k,recentBlockhash:t,instructions:E})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((a,i)=>e[i].equals(a.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const a=r.toString();return e.has(a)?!1:(e.add(a),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const a=this._compile();this._partialSign(a,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}const a=this._compile();this._partialSign(a,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(a=>{const i=pc(r,a.secretKey);this._addSignature(a.publicKey,Ir(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Qt(e.length===64);const r=this.signatures.findIndex(a=>t.equals(a.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Kt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:a,publicKey:i}of this.signatures)a===null?e&&(r.missing||(r.missing=[])).push(i):gc(a,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),a=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(a,e);if(i){let u="Signature verification failed.";throw i.invalid&&(u+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(v=>v.toBase58()).join("`, `")}\`].`),i.missing&&(u+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(v=>v.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(a)}_serialize(t){const{signatures:e}=this,r=[];we(r,e.length);const a=r.length+e.length*64+t.length,i=Kt.Buffer.alloc(a);return Qt(e.length<256),Kt.Buffer.from(r).copy(i,0),e.forEach(({signature:u},v)=>{u!==null&&(Qt(u.length===64,"signature has invalid length"),Kt.Buffer.from(u).copy(i,r.length+v*64))}),t.copy(i,r.length+e.length*64),Qt(i.length<=Er,`Transaction too large: ${i.length} > ${Er}`),i}get keys(){return Qt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Qt(this.instructions.length===1),this.instructions[0].programId}get data(){return Qt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ye(e);let a=[];for(let i=0;i<r;i++){const u=e.slice(0,Gn);e=e.slice(Gn),a.push(jt.encode(Kt.Buffer.from(u)))}return $e.populate(Ve.from(e),a)}static populate(t,e=[]){const r=new $e;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((a,i)=>{const u={signature:a==jt.encode(_c)?null:jt.decode(a),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(a=>{const i=a.accounts.map(u=>{const v=t.accountKeys[u];return{pubkey:v,isSigner:r.signatures.some(w=>w.publicKey.toString()===v.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new Hi({keys:i,programId:t.accountKeys[a.programIdIndex],data:jt.decode(a.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Sc=160,kc=64,Ac=Sc/kc,Ec=1e3/Ac;new et("SysvarC1ock11111111111111111111111111111111");new et("SysvarEpochSchedu1e111111111111111111111111");new et("Sysvar1nstructions1111111111111111111111111");new et("SysvarRecentB1ockHashes11111111111111111111");new et("SysvarRent111111111111111111111111111111111");new et("SysvarRewards111111111111111111111111111111");new et("SysvarS1otHashes111111111111111111111111111");new et("SysvarS1otHistory11111111111111111111111111");new et("SysvarStakeHistory1111111111111111111111111");function kr(o){return new Promise(t=>setTimeout(t,o))}const Bc=re("lamportsPerSignature"),Ys=J([tt("version"),tt("state"),Dt("authorizedPubkey"),Dt("nonce"),J([Bc],"feeCalculator")]);Ys.span;class Mi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ys.decode(Ir(t),0);return new Mi({authorizedPubkey:new et(e.authorizedPubkey),nonce:new et(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ic=o=>{const t=o.decode.bind(o),e=o.encode.bind(o);return{decode:t,encode:e}},Rc=o=>t=>{const e=Xt(o,t),{encode:r,decode:a}=Ic(e),i=e;return i.decode=(u,v)=>{const w=a(u,v);return xa(Kt.Buffer.from(w))},i.encode=(u,v,w)=>{const M=ka(u,o);return r(M,v,w)},i},Rr=Rc(8);Object.freeze({Create:{index:0,layout:J([tt("instruction"),ge("lamports"),ge("space"),Dt("programId")])},Assign:{index:1,layout:J([tt("instruction"),Dt("programId")])},Transfer:{index:2,layout:J([tt("instruction"),Rr("lamports")])},CreateWithSeed:{index:3,layout:J([tt("instruction"),Dt("base"),Ar("seed"),ge("lamports"),ge("space"),Dt("programId")])},AdvanceNonceAccount:{index:4,layout:J([tt("instruction")])},WithdrawNonceAccount:{index:5,layout:J([tt("instruction"),ge("lamports")])},InitializeNonceAccount:{index:6,layout:J([tt("instruction"),Dt("authorized")])},AuthorizeNonceAccount:{index:7,layout:J([tt("instruction"),Dt("authorized")])},Allocate:{index:8,layout:J([tt("instruction"),ge("space")])},AllocateWithSeed:{index:9,layout:J([tt("instruction"),Dt("base"),Ar("seed"),ge("space"),Dt("programId")])},AssignWithSeed:{index:10,layout:J([tt("instruction"),Dt("base"),Ar("seed"),Dt("programId")])},TransferWithSeed:{index:11,layout:J([tt("instruction"),Rr("lamports"),Ar("seed"),Dt("programId")])},UpgradeNonceAccount:{index:12,layout:J([tt("instruction")])}});new et("11111111111111111111111111111111");new et("BPFLoader2111111111111111111111111111111111");function Tc(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Cc=Object.prototype.toString,Pc=Object.keys||function(o){var t=[];for(var e in o)t.push(e);return t};function jr(o,t){var e,r,a,i,u,v,w;if(o===!0)return"true";if(o===!1)return"false";switch(typeof o){case"object":if(o===null)return null;if(o.toJSON&&typeof o.toJSON=="function")return jr(o.toJSON(),t);if(w=Cc.call(o),w==="[object Array]"){for(a="[",r=o.length-1,e=0;e<r;e++)a+=jr(o[e],!0)+",";return r>-1&&(a+=jr(o[e],!0)),a+"]"}else if(w==="[object Object]"){for(i=Pc(o).sort(),r=i.length,a="",e=0;e<r;)u=i[e],v=jr(o[u],!1),v!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+v),e++;return"{"+a+"}"}else return JSON.stringify(o);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(o);default:return isFinite(o)?o:null}}var Lc=function(o){var t=jr(o,!1);if(t!==void 0)return""+t},$i=Tc(Lc);const Wr=32;function Kn(o){let t=0;for(;o>1;)o/=2,t++;return t}function Oc(o){return o===0?1:(o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,o|=o>>32,o+1)}class Nc{constructor(t,e,r,a,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=a,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Kn(Oc(t+Wr+1))-Kn(Wr)-1,r=this.getSlotsInEpoch(e),a=t-(r-Wr);return[e,a]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),a=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[a,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Wr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Kn(Wr)):this.slotsPerEpoch}}class Wi extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class Z extends Error{constructor({code:t,message:e,data:r},a){super(a!=null?`${a}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var qc=globalThis.fetch;class Uc extends lc{constructor(t,e,r){const a=i=>{const u=dc(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(a,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Fc(o,t){let e;try{e=o.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==o.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${o.index}`);return e}const Gi=56;class ji{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Fc(Kc,t),r=t.length-Gi;Qt(r>=0,"lookup table is invalid"),Qt(r%32===0,"lookup table is invalid");const a=r/32,{addresses:i}=J([fe(Dt(),a,"addresses")]).decode(t.slice(Gi));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new et(e.authority[0]):void 0,addresses:i.map(u=>new et(u))}}}const Kc={index:1,layout:J([tt("typeIndex"),Rr("deactivationSlot"),re("lastExtendedSlot"),$t("lastExtendedStartIndex"),$t(),fe(Dt(),yr($t(),-1),"authority")])},Dc=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function zc(o){const t=o.match(Dc);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${o}\``);const[e,r,a,i]=t,u=o.startsWith("https:")?"wss:":"ws:",v=a==null?null:parseInt(a.slice(1),10),w=v==null?"":`:${v+1}`;return`${u}//${r}${w}${i}`}const te=nn(mi(et),F(),o=>new et(o)),Qs=vi([F(),Jt("base64")]),xi=nn(mi(Kt.Buffer),Qs,o=>Kt.Buffer.from(o[0],"base64")),Hc=30*1e3;function $c(o){if(/^https?:/.test(o)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return o}function Zt(o){let t,e;if(typeof o=="string")t=o;else if(o){const{commitment:r,...a}=o;t=r,e=a}return{commitment:t,config:e}}function to(o){return de([O({jsonrpc:Jt("2.0"),id:F(),result:o}),O({jsonrpc:Jt("2.0"),id:F(),error:O({code:rn(),message:F(),data:nt(Pa())})})])}const Wc=to(rn());function Ft(o){return nn(to(o),Wc,t=>"error"in t?t:{...t,result:D(t.result,o)})}function Yt(o){return Ft(O({context:O({slot:x()}),value:o}))}function Bn(o){return O({context:O({slot:x()}),value:o})}function Dn(o,t){return o===0?new yn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new et(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:jt.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ve(t)}const Gc=O({foundation:x(),foundationTerm:x(),initial:x(),taper:x(),terminal:x()}),jc=Ft($(H(O({epoch:x(),effectiveSlot:x(),amount:x(),postBalance:x(),commission:nt(H(x()))})))),Vc=$(O({slot:x(),prioritizationFee:x()})),Zc=O({total:x(),validator:x(),foundation:x(),epoch:x()}),Jc=O({epoch:x(),slotIndex:x(),slotsInEpoch:x(),absoluteSlot:x(),blockHeight:nt(x()),transactionCount:nt(x())}),Xc=O({slotsPerEpoch:x(),leaderScheduleSlotOffset:x(),warmup:Ee(),firstNormalEpoch:x(),firstNormalSlot:x()}),Yc=Ls(F(),$(x())),Mr=H(de([O({}),F()])),Qc=O({err:Mr}),tu=Jt("receivedSignature"),eu=O({"solana-core":F(),"feature-set":nt(x())}),Vi=Yt(O({err:H(de([O({}),F()])),logs:H($(F())),accounts:nt(H($(H(O({executable:Ee(),owner:F(),lamports:x(),data:$(F()),rentEpoch:nt(x())}))))),unitsConsumed:nt(x()),returnData:nt(H(O({programId:F(),data:vi([F(),Jt("base64")])})))})),ru=Yt(O({byIdentity:Ls(F(),$(x())),range:O({firstSlot:x(),lastSlot:x()})}));function nu(o,t,e,r,a,i){const u=e||qc;let v;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let w;return r&&(w=async(b,A)=>{const L=await new Promise((k,E)=>{try{r(b,A,(B,_)=>k([B,_]))}catch(B){E(B)}});return await u(...L)}),new cc(async(b,A)=>{const L={method:"POST",body:b,agent:v,headers:Object.assign({"Content-Type":"application/json"},t||{},ih)};try{let k=5,E,B=500;for(;w?E=await w(o,L):E=await u(o,L),!(E.status!==429||a===!0||(k-=1,k===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${B}ms delay...`),await kr(B),B*=2;const _=await E.text();E.ok?A(null,_):A(new Error(`${E.status} ${E.statusText}: ${_}`))}catch(k){k instanceof Error&&A(k)}},{})}function iu(o){return(t,e)=>new Promise((r,a)=>{o.request(t,e,(i,u)=>{if(i){a(i);return}r(u)})})}function su(o){return t=>new Promise((e,r)=>{t.length===0&&e([]);const a=t.map(i=>o.request(i.methodName,i.args));o.request(a,(i,u)=>{if(i){r(i);return}e(u)})})}const ou=Ft(Gc),au=Ft(Zc),cu=Ft(Vc),uu=Ft(Jc),hu=Ft(Xc),fu=Ft(Yc),lu=Ft(x()),du=Yt(O({total:x(),circulating:x(),nonCirculating:x(),nonCirculatingAccounts:$(te)})),jn=O({amount:F(),uiAmount:H(x()),decimals:x(),uiAmountString:nt(F())}),pu=Yt($(O({address:te,amount:F(),uiAmount:H(x()),decimals:x(),uiAmountString:nt(F())}))),gu=Yt($(O({pubkey:te,account:O({executable:Ee(),owner:te,lamports:x(),data:xi,rentEpoch:x()})}))),Vn=O({program:F(),parsed:rn(),space:x()}),mu=Yt($(O({pubkey:te,account:O({executable:Ee(),owner:te,lamports:x(),data:Vn,rentEpoch:x()})}))),vu=Yt($(O({lamports:x(),address:te}))),Jr=O({executable:Ee(),owner:te,lamports:x(),data:xi,rentEpoch:x()}),yu=O({pubkey:te,account:Jr}),wu=nn(de([mi(Kt.Buffer),Vn]),de([Qs,Vn]),o=>Array.isArray(o)?D(o,xi):o),Zn=O({executable:Ee(),owner:te,lamports:x(),data:wu,rentEpoch:x()}),bu=O({pubkey:te,account:Zn}),Mu=O({state:de([Jt("active"),Jt("inactive"),Jt("activating"),Jt("deactivating")]),active:x(),inactive:x()}),xu=Ft($(O({signature:F(),slot:x(),err:Mr,memo:H(F()),blockTime:nt(H(x()))}))),_u=Ft($(O({signature:F(),slot:x(),err:Mr,memo:H(F()),blockTime:nt(H(x()))}))),Su=O({subscription:x(),result:Bn(Jr)}),ku=O({pubkey:te,account:Jr}),Au=O({subscription:x(),result:Bn(ku)}),Eu=O({parent:x(),slot:x(),root:x()}),Bu=O({subscription:x(),result:Eu}),Iu=de([O({type:de([Jt("firstShredReceived"),Jt("completed"),Jt("optimisticConfirmation"),Jt("root")]),slot:x(),timestamp:x()}),O({type:Jt("createdBank"),parent:x(),slot:x(),timestamp:x()}),O({type:Jt("frozen"),slot:x(),timestamp:x(),stats:O({numTransactionEntries:x(),numSuccessfulTransactions:x(),numFailedTransactions:x(),maxTransactionsPerEntry:x()})}),O({type:Jt("dead"),slot:x(),timestamp:x(),err:F()})]),Ru=O({subscription:x(),result:Iu}),Tu=O({subscription:x(),result:Bn(de([Qc,tu]))}),Cu=O({subscription:x(),result:x()}),Pu=O({pubkey:F(),gossip:H(F()),tpu:H(F()),rpc:H(F()),version:H(F())}),Zi=O({votePubkey:F(),nodePubkey:F(),activatedStake:x(),epochVoteAccount:Ee(),epochCredits:$(vi([x(),x(),x()])),commission:x(),lastVote:x(),rootSlot:H(x())}),Lu=Ft(O({current:$(Zi),delinquent:$(Zi)})),Ou=de([Jt("processed"),Jt("confirmed"),Jt("finalized")]),Nu=O({slot:x(),confirmations:H(x()),err:Mr,confirmationStatus:nt(Ou)}),qu=Yt($(H(Nu))),Uu=Ft(x()),eo=O({accountKey:te,writableIndexes:$(x()),readonlyIndexes:$(x())}),_i=O({signatures:$(F()),message:O({accountKeys:$(F()),header:O({numRequiredSignatures:x(),numReadonlySignedAccounts:x(),numReadonlyUnsignedAccounts:x()}),instructions:$(O({accounts:$(x()),data:F(),programIdIndex:x()})),recentBlockhash:F(),addressTableLookups:nt($(eo))})}),ro=O({pubkey:te,signer:Ee(),writable:Ee(),source:nt(de([Jt("transaction"),Jt("lookupTable")]))}),no=O({accountKeys:$(ro),signatures:$(F())}),io=O({parsed:rn(),program:F(),programId:te}),so=O({accounts:$(te),data:F(),programId:te}),Fu=de([so,io]),Ku=de([O({parsed:rn(),program:F(),programId:F()}),O({accounts:$(F()),data:F(),programId:F()})]),oo=nn(Fu,Ku,o=>"accounts"in o?D(o,so):D(o,io)),ao=O({signatures:$(F()),message:O({accountKeys:$(ro),instructions:$(oo),recentBlockhash:F(),addressTableLookups:nt(H($(eo)))})}),wn=O({accountIndex:x(),mint:F(),owner:nt(F()),uiTokenAmount:jn}),co=O({writable:$(te),readonly:$(te)}),In=O({err:Mr,fee:x(),innerInstructions:nt(H($(O({index:x(),instructions:$(O({accounts:$(x()),data:F(),programIdIndex:x()}))})))),preBalances:$(x()),postBalances:$(x()),logMessages:nt(H($(F()))),preTokenBalances:nt(H($(wn))),postTokenBalances:nt(H($(wn))),loadedAddresses:nt(co),computeUnitsConsumed:nt(x())}),Si=O({err:Mr,fee:x(),innerInstructions:nt(H($(O({index:x(),instructions:$(oo)})))),preBalances:$(x()),postBalances:$(x()),logMessages:nt(H($(F()))),preTokenBalances:nt(H($(wn))),postTokenBalances:nt(H($(wn))),loadedAddresses:nt(co),computeUnitsConsumed:nt(x())}),Lr=de([Jt(0),Jt("legacy")]),xr=O({pubkey:F(),lamports:x(),postBalance:H(x()),rewardType:H(F()),commission:nt(H(x()))}),Du=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),transactions:$(O({transaction:_i,meta:H(In),version:nt(Lr)})),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),zu=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),Hu=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),transactions:$(O({transaction:no,meta:H(In),version:nt(Lr)})),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),$u=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),transactions:$(O({transaction:ao,meta:H(Si),version:nt(Lr)})),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),Wu=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),transactions:$(O({transaction:no,meta:H(Si),version:nt(Lr)})),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),Gu=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),rewards:nt($(xr)),blockTime:H(x()),blockHeight:H(x())}))),ju=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),transactions:$(O({transaction:_i,meta:H(In)})),rewards:nt($(xr)),blockTime:H(x())}))),Ji=Ft(H(O({blockhash:F(),previousBlockhash:F(),parentSlot:x(),signatures:$(F()),blockTime:H(x())}))),zn=Ft(H(O({slot:x(),meta:H(In),blockTime:nt(H(x())),transaction:_i,version:nt(Lr)}))),cn=Ft(H(O({slot:x(),transaction:ao,meta:H(Si),blockTime:nt(H(x())),version:nt(Lr)}))),Vu=Yt(O({blockhash:F(),feeCalculator:O({lamportsPerSignature:x()})})),Zu=Yt(O({blockhash:F(),lastValidBlockHeight:x()})),Ju=Yt(Ee()),Xu=O({slot:x(),numTransactions:x(),numSlots:x(),samplePeriodSecs:x()}),Yu=Ft($(Xu)),Qu=Yt(H(O({feeCalculator:O({lamportsPerSignature:x()})}))),th=Ft(F()),eh=Ft(F()),rh=O({err:Mr,logs:$(F()),signature:F()}),nh=O({result:Bn(rh),subscription:x()}),ih={"solana-client":"js/0.0.0-development"};class ki{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const M={};return async b=>{const{commitment:A,config:L}=Zt(b),k=this._buildArgs([],A,void 0,L),E=$i(k);return M[E]=M[E]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",k),_=D(B,Ft(x()));if("error"in _)throw new Z(_.error,"failed to get block height information");return _.result}finally{delete M[E]}})(),await M[E]}})();let r,a,i,u,v,w;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,a=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,v=e.disableRetryOnRateLimit,w=e.httpAgent),this._rpcEndpoint=$c(t),this._rpcWsEndpoint=r||zc(t),this._rpcClient=nu(t,a,i,u,v,w),this._rpcRequest=iu(this._rpcClient),this._rpcBatchRequest=su(this._rpcClient),this._rpcWebSocket=new Uc(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgs([t.toBase58()],r,void 0,a),u=await this._rpcRequest("getBalance",i),v=D(u,Yt(x()));if("error"in v)throw new Z(v.error,`failed to get balance for ${t.toBase58()}`);return v.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=D(e,Ft(H(x())));if("error"in r)throw new Z(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=D(t,Ft(x()));if("error"in e)throw new Z(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=D(t,lu);if("error"in e)throw new Z(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),a=D(r,du);if("error"in a)throw new Z(a.error,"failed to get supply");return a.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenSupply",r),i=D(a,Yt(jn));if("error"in i)throw new Z(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenAccountBalance",r),i=D(a,Yt(jn));if("error"in i)throw new Z(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:a,config:i}=Zt(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const v=this._buildArgs(u,a,"base64",i),w=await this._rpcRequest("getTokenAccountsByOwner",v),M=D(w,gu);if("error"in M)throw new Z(M.error,`failed to get token accounts owned by account ${t.toBase58()}`);return M.result}async getParsedTokenAccountsByOwner(t,e,r){let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const i=this._buildArgs(a,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),v=D(u,mu);if("error"in v)throw new Z(v.error,`failed to get token accounts owned by account ${t.toBase58()}`);return v.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],a=await this._rpcRequest("getLargestAccounts",r),i=D(a,vu);if("error"in i)throw new Z(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenLargestAccounts",r),i=D(a,pu);if("error"in i)throw new Z(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgs([t.toBase58()],r,"base64",a),u=await this._rpcRequest("getAccountInfo",i),v=D(u,Yt(H(Jr)));if("error"in v)throw new Z(v.error,`failed to get info about account ${t.toBase58()}`);return v.result}async getParsedAccountInfo(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",a),u=await this._rpcRequest("getAccountInfo",i),v=D(u,Yt(H(Zn)));if("error"in v)throw new Z(v.error,`failed to get info about account ${t.toBase58()}`);return v.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:a}=Zt(e),i=t.map(M=>M.toBase58()),u=this._buildArgs([i],r,"jsonParsed",a),v=await this._rpcRequest("getMultipleAccounts",u),w=D(v,Yt($(H(Zn))));if("error"in w)throw new Z(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:a}=Zt(e),i=t.map(M=>M.toBase58()),u=this._buildArgs([i],r,"base64",a),v=await this._rpcRequest("getMultipleAccounts",u),w=D(v,Yt($(H(Jr))));if("error"in w)throw new Z(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:a,config:i}=Zt(e),u=this._buildArgs([t.toBase58()],a,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),v=await this._rpcRequest("getStakeActivation",u),w=D(v,Ft(Mu));if("error"in w)throw new Z(w.error,`failed to get Stake Activation ${t.toBase58()}`);return w.result}async getProgramAccounts(t,e){const{commitment:r,config:a}=Zt(e),{encoding:i,...u}=a||{},v=this._buildArgs([t.toBase58()],r,i||"base64",u),w=await this._rpcRequest("getProgramAccounts",v),M=$(yu),b=u.withContext===!0?D(w,Yt(M)):D(w,Ft(M));if("error"in b)throw new Z(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",a),u=await this._rpcRequest("getProgramAccounts",i),v=D(u,Ft($(bu)));if("error"in v)throw new Z(v.error,`failed to get accounts owned by program ${t.toBase58()}`);return v.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const u=t;if((i=u.abortSignal)!=null&&i.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let a;try{a=jt.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Qt(a.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,a,i=!1;const u=new Promise((w,M)=>{try{r=this.onSignature(e,(A,L)=>{r=void 0;const k={context:L,value:A};w({__type:He.PROCESSED,response:k})},t);const b=new Promise(A=>{r==null?A():a=this._onSubscriptionStateChange(r,L=>{L==="subscribed"&&A()})});(async()=>{if(await b,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:L,value:k}=A;if(k!=null)if(k!=null&&k.err)M(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,w({__type:He.PROCESSED,response:{context:L,value:k}})}})()}catch(b){M(b)}});return{abortConfirmation:()=>{a&&(a(),a=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:a}}){let i=!1;const u=new Promise(A=>{const L=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await L();if(!i){for(;k<=r;)if(await kr(1e3),i||(k=await L(),i))return;A({__type:He.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:v,confirmationPromise:w}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),M=this.getCancellationPromise(e);let b;try{const A=await Promise.race([M,w,u]);if(A.__type===He.PROCESSED)b=A.response;else throw new Js(a)}finally{i=!0,v()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:a,nonceValue:i,signature:u}}){let v=!1;const w=new Promise(k=>{let E=i,B=null;const _=async()=>{try{const{context:q,value:K}=await this.getNonceAndContext(a,{commitment:t,minContextSlot:r});return B=q.slot,K==null?void 0:K.nonce}catch{return E}};(async()=>{if(E=await _(),!v)for(;;){if(i!==E){k({__type:He.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await kr(2e3),v||(E=await _(),v))return}})()}),{abortConfirmation:M,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),A=this.getCancellationPromise(e);let L;try{const k=await Promise.race([A,b,w]);if(k.__type===He.PROCESSED)L=k.response;else{let E;for(;;){const B=await this.getSignatureStatus(u);if(B==null)break;if(B.context.slot<(k.slotInWhichNonceDidAdvance??r)){await kr(400);continue}E=B;break}if(E!=null&&E.value){const B=t||"finalized",{confirmationStatus:_}=E.value;switch(B){case"processed":case"recent":if(_!=="processed"&&_!=="confirmed"&&_!=="finalized")throw new Gr(u);break;case"confirmed":case"single":case"singleGossip":if(_!=="confirmed"&&_!=="finalized")throw new Gr(u);break;case"finalized":case"max":case"root":if(_!=="finalized")throw new Gr(u);break;default:}L={context:E.context,value:{err:E.value.err}}}else throw new Gr(u)}}finally{v=!0,M()}return L}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const a=new Promise(w=>{let M=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{M=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>w({__type:He.TIMED_OUT,timeoutMs:M}),M)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let v;try{const w=await Promise.race([u,a]);if(w.__type===He.PROCESSED)v=w.response;else throw new Xs(e,w.timeoutMs/1e3)}finally{clearTimeout(r),i()}return v}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=D(t,Ft($(Pu)));if("error"in e)throw new Z(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),a=D(r,Lu);if("error"in a)throw new Z(a.error,"failed to get vote accounts");return a.result}async getSlot(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",a),u=D(i,Ft(x()));if("error"in u)throw new Z(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",a),u=D(i,Ft(F()));if("error"in u)throw new Z(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],a=await this._rpcRequest("getSlotLeaders",r),i=D(a,Ft($(te)));if("error"in i)throw new Z(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:a}=await this.getSignatureStatuses([t],e);Qt(a.length===1);const i=a[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const a=await this._rpcRequest("getSignatureStatuses",r),i=D(a,qu);if("error"in i)throw new Z(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",a),u=D(i,Ft(x()));if("error"in u)throw new Z(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),a=D(r,ou);if("error"in a)throw new Z(a.error,"failed to get inflation");return a.result}async getInflationReward(t,e,r){const{commitment:a,config:i}=Zt(r),u=this._buildArgs([t.map(M=>M.toBase58())],a,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),v=await this._rpcRequest("getInflationReward",u),w=D(v,jc);if("error"in w)throw new Z(w.error,"failed to get inflation reward");return w.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=D(t,au);if("error"in e)throw new Z(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",a),u=D(i,uu);if("error"in u)throw new Z(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=D(t,hu);if("error"in e)throw new Z(e.error,"failed to get epoch schedule");const r=e.result;return new Nc(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=D(t,fu);if("error"in e)throw new Z(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),a=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=D(a,Uu);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),a=D(r,Vu);if("error"in a)throw new Z(a.error,"failed to get recent blockhash");return a.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=D(e,Yu);if("error"in r)throw new Z(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),a=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=D(a,Qu);if("error"in i)throw new Z(i.error,"failed to get fee calculator");const{context:u,value:v}=i.result;return{context:u,value:v!==null?v.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ir(t.serialize()).toString("base64"),a=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",a),u=D(i,Yt(H(x())));if("error"in u)throw new Z(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(v=>v.toBase58()),r=e!=null&&e.length?[e]:[],a=await this._rpcRequest("getRecentPrioritizationFees",r),i=D(a,cu);if("error"in i)throw new Z(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",a),u=D(i,Zu);if("error"in u)throw new Z(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgs([t],r,void 0,a),u=await this._rpcRequest("isBlockhashValid",i),v=D(u,Ju);if("error"in v)throw new Z(v.error,"failed to determine if the blockhash `"+t+"`is valid");return v.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=D(t,Ft(eu));if("error"in e)throw new Z(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=D(t,Ft(F()));if("error"in e)throw new Z(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,a),u=await this._rpcRequest("getBlock",i);try{switch(a==null?void 0:a.transactionDetails){case"accounts":{const v=D(u,Hu);if("error"in v)throw v.error;return v.result}case"none":{const v=D(u,zu);if("error"in v)throw v.error;return v.result}default:{const v=D(u,Du);if("error"in v)throw v.error;const{result:w}=v;return w?{...w,transactions:w.transactions.map(({transaction:M,meta:b,version:A})=>({meta:b,transaction:{...M,message:Dn(A,M.message)},version:A}))}:null}}}catch(v){throw new Z(v,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",a),u=await this._rpcRequest("getBlock",i);try{switch(a==null?void 0:a.transactionDetails){case"accounts":{const v=D(u,Wu);if("error"in v)throw v.error;return v.result}case"none":{const v=D(u,Gu);if("error"in v)throw v.error;return v.result}default:{const v=D(u,$u);if("error"in v)throw v.error;return v.result}}}catch(v){throw new Z(v,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:v,...w}=t;r=v,e=w}const a=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",a),u=D(i,ru);if("error"in u)throw new Z(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,a),u=await this._rpcRequest("getTransaction",i),v=D(u,zn);if("error"in v)throw new Z(v.error,"failed to get transaction");const w=v.result;return w&&{...w,transaction:{...w.transaction,message:Dn(w.version,w.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:a}=Zt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",a),u=await this._rpcRequest("getTransaction",i),v=D(u,cn);if("error"in v)throw new Z(v.error,"failed to get transaction");return v.result}async getParsedTransactions(t,e){const{commitment:r,config:a}=Zt(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,"jsonParsed",a)}));return(await this._rpcBatchRequest(i)).map(w=>{const M=D(w,cn);if("error"in M)throw new Z(M.error,"failed to get transactions");return M.result})}async getTransactions(t,e){const{commitment:r,config:a}=Zt(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,void 0,a)}));return(await this._rpcBatchRequest(i)).map(w=>{const M=D(w,zn);if("error"in M)throw new Z(M.error,"failed to get transactions");const b=M.result;return b&&{...b,transaction:{...b.transaction,message:Dn(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),a=await this._rpcRequest("getConfirmedBlock",r),i=D(a,ju);if("error"in i)throw new Z(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");const v={...u,transactions:u.transactions.map(({transaction:w,meta:M})=>{const b=new Ve(w.message);return{meta:M,transaction:{...w,message:b}}})};return{...v,transactions:v.transactions.map(({transaction:w,meta:M})=>({meta:M,transaction:$e.populate(w.message,w.signatures)}))}}async getBlocks(t,e,r){const a=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",a),u=D(i,Ft($(x())));if("error"in u)throw new Z(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),a=await this._rpcRequest("getBlock",r),i=D(a,Ji);if("error"in i)throw new Z(i.error,"failed to get block");const u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),a=await this._rpcRequest("getConfirmedBlock",r),i=D(a,Ji);if("error"in i)throw new Z(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),a=await this._rpcRequest("getConfirmedTransaction",r),i=D(a,zn);if("error"in i)throw new Z(i.error,"failed to get transaction");const u=i.result;if(!u)return u;const v=new Ve(u.transaction.message),w=u.transaction.signatures;return{...u,transaction:$e.populate(v,w)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),a=await this._rpcRequest("getConfirmedTransaction",r),i=D(a,cn);if("error"in i)throw new Z(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const v=D(u,cn);if("error"in v)throw new Z(v.error,"failed to get confirmed transactions");return v.result})}async getConfirmedSignaturesForAddress(t,e,r){let a={},i=await this.getFirstAvailableBlock();for(;!("until"in a)&&(e--,!(e<=0||e<i));)try{const w=await this.getConfirmedBlockSignatures(e,"finalized");w.signatures.length>0&&(a.until=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}let u=await this.getSlot("finalized");for(;!("before"in a)&&(r++,!(r>u));)try{const w=await this.getConfirmedBlockSignatures(r);w.signatures.length>0&&(a.before=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}return(await this.getConfirmedSignaturesForAddress2(t,a)).map(w=>w.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const a=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",a),u=D(i,xu);if("error"in u)throw new Z(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const a=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",a),u=D(i,_u);if("error"in u)throw new Z(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:a}=await this.getAccountInfoAndContext(t,e);let i=null;return a!==null&&(i=new ji({key:t,state:ji.deserialize(a.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:a}=await this.getAccountInfoAndContext(t,e);let i=null;return a!==null&&(i=Mi.fromAccountData(a.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),a=D(r,th);if("error"in a)throw new Z(a.error,`airdrop to ${t.toBase58()} failed`);return a.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await kr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Hc;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let a=0;a<50;a++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await kr(Ec/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Zt(t),a=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",a),u=D(i,Yt(x()));if("error"in u)throw new Z(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const B=t.serialize(),_=Kt.Buffer.from(B).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const q=e||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment);const K=[_,q],C=await this._rpcRequest("simulateTransaction",K),N=D(C,Vi);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let a;if(t instanceof $e){let E=t;a=new $e,a.feePayer=E.feePayer,a.instructions=t.instructions,a.nonceInfo=E.nonceInfo,a.signatures=E.signatures}else a=$e.populate(t),a._message=a._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(a.nonceInfo&&i)a.sign(...i);else{let E=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(E);if(a.lastValidBlockHeight=B.lastValidBlockHeight,a.recentBlockhash=B.blockhash,!i)break;if(a.sign(...i),!a.signature)throw new Error("!signature");const _=a.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(_)&&!this._blockhashInfo.transactionSignatures.includes(_)){this._blockhashInfo.simulatedSignatures.push(_);break}else E=!0}}const u=a._compile(),v=u.serialize(),M=a._serialize(v).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const E=(Array.isArray(r)?r:u.nonProgramIds()).map(B=>B.toBase58());b.accounts={encoding:"base64",addresses:E}}i&&(b.sigVerify=!0);const A=[M,b],L=await this._rpcRequest("simulateTransaction",A),k=D(L,Vi);if("error"in k){let E;if("data"in k.error&&(E=k.error.data.logs,E&&Array.isArray(E))){const B=`
    `,_=B+E.join(B);console.error(k.error.message,_)}throw new Wi("failed to simulate transaction: "+k.error.message,E)}return k.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const a=e;if(t.nonceInfo)t.sign(...a);else{let u=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=v.lastValidBlockHeight,t.recentBlockhash=v.blockhash,t.sign(...a),!t.signature)throw new Error("!signature");const w=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(w))u=!0;else{this._blockhashInfo.transactionSignatures.push(w);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ir(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},a=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),a&&(r.skipPreflight=a),i&&(r.preflightCommitment=i);const u=[t,r],v=await this._rpcRequest("sendTransaction",u),w=D(v,eh);if("error"in w){let M;throw"data"in w.error&&(M=w.error.data.logs),new Wi("failed to send transaction: "+w.error.message,M)}return w.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var a;const r=(a=this._subscriptionsByHash[t])==null?void 0:a.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const a=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return a.add(e),()=>{a.delete(e),a.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const a=this._subscriptionsByHash[r];if(a!==void 0)switch(a.state){case"pending":case"unsubscribed":if(a.callbacks.size===0){delete this._subscriptionsByHash[r],a.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[a.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:u}=a;try{this._setSubscription(r,{...a,state:"subscribing"});const v=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...a,serverSubscriptionId:v,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[v]=a.callbacks,await this._updateSubscriptions()}catch(v){if(v instanceof Error&&console.error(`${u} error for argument`,i,v.message),!e())return;this._setSubscription(r,{...a,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":a.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:u}=a;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...a,state:"unsubscribing"}),this._setSubscription(r,{...a,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(v){if(v instanceof Error&&console.error(`${u} error:`,v.message),!e())return;this._setSubscription(r,{...a,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...a,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(a=>{try{a(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=D(t,Su);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,a=$i([t.method,e],!0),i=this._subscriptionsByHash[a];return i===void 0?this._subscriptionsByHash[a]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=a,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[a];Qt(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const a=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=D(t,Au);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,a){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",a?{filters:a}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const a=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},a)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=D(t,nh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=D(t,Bu);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=D(t,Ru);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,a){const i=e||this._commitment;if(i||r||a){let u={};r&&(u.encoding=r),i&&(u.commitment=i),a&&(u=Object.assign(u,a)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,a){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,a)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=D(t,Tu);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const a=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,v)=>{if(u.type==="status"){e(u.result,v);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return i}onSignatureWithOptions(t,e,r){const{commitment:a,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],a,void 0,i),v=this._makeSubscription({callback:(w,M)=>{e(w,M);try{this.removeSignatureListener(v)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return v}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=D(t,Cu);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Vr{constructor(t){this._keypair=void 0,this._keypair=t??Ki()}static generate(){return new Vr(Ki())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const a=t.slice(0,32),i=Wn(a);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new Vr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Wn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Vr({publicKey:e,secretKey:r})}get publicKey(){return new et(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:J([tt("instruction"),Rr("recentSlot"),$t("bumpSeed")])},FreezeLookupTable:{index:1,layout:J([tt("instruction")])},ExtendLookupTable:{index:2,layout:J([tt("instruction"),Rr(),fe(Dt(),yr(tt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:J([tt("instruction")])},CloseLookupTable:{index:4,layout:J([tt("instruction")])}});new et("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:J([$t("instruction"),tt("units"),tt("additionalFee")])},RequestHeapFrame:{index:1,layout:J([$t("instruction"),tt("bytes")])},SetComputeUnitLimit:{index:2,layout:J([$t("instruction"),tt("units")])},SetComputeUnitPrice:{index:3,layout:J([$t("instruction"),Rr("microLamports")])}});new et("ComputeBudget111111111111111111111111111111");J([$t("numSignatures"),$t("padding"),ve("signatureOffset"),ve("signatureInstructionIndex"),ve("publicKeyOffset"),ve("publicKeyInstructionIndex"),ve("messageDataOffset"),ve("messageDataSize"),ve("messageInstructionIndex")]);new et("Ed25519SigVerify111111111111111111111111111");is.utils.isValidPrivateKey;is.getPublicKey;J([$t("numSignatures"),ve("signatureOffset"),$t("signatureInstructionIndex"),ve("ethAddressOffset"),$t("ethAddressInstructionIndex"),ve("messageDataOffset"),ve("messageDataSize"),$t("messageInstructionIndex"),Xt(20,"ethAddress"),Xt(64,"signature"),$t("recoveryId")]);new et("KeccakSecp256k11111111111111111111111111111");var uo;new et("StakeConfig11111111111111111111111111111111");class ho{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}uo=ho;ho.default=new uo(0,0,et.default);Object.freeze({Initialize:{index:0,layout:J([tt("instruction"),wc(),bc()])},Authorize:{index:1,layout:J([tt("instruction"),Dt("newAuthorized"),tt("stakeAuthorizationType")])},Delegate:{index:2,layout:J([tt("instruction")])},Split:{index:3,layout:J([tt("instruction"),ge("lamports")])},Withdraw:{index:4,layout:J([tt("instruction"),ge("lamports")])},Deactivate:{index:5,layout:J([tt("instruction")])},Merge:{index:7,layout:J([tt("instruction")])},AuthorizeWithSeed:{index:8,layout:J([tt("instruction"),Dt("newAuthorized"),tt("stakeAuthorizationType"),Ar("authoritySeed"),Dt("authorityOwner")])}});new et("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:J([tt("instruction"),Mc()])},Authorize:{index:1,layout:J([tt("instruction"),Dt("newAuthorized"),tt("voteAuthorizationType")])},Withdraw:{index:3,layout:J([tt("instruction"),ge("lamports")])},AuthorizeWithSeed:{index:10,layout:J([tt("instruction"),xc()])}});new et("Vote111111111111111111111111111111111111111");new et("Va1idator1nfo111111111111111111111111111111");O({name:F(),website:nt(F()),details:nt(F()),keybaseUsername:nt(F())});new et("Vote111111111111111111111111111111111111111");J([Dt("nodePubkey"),Dt("authorizedWithdrawer"),$t("commission"),re(),fe(J([re("slot"),tt("confirmationCount")]),yr(tt(),-8),"votes"),$t("rootSlotValid"),re("rootSlot"),re(),fe(J([re("epoch"),Dt("authorizedVoter")]),yr(tt(),-8),"authorizedVoters"),J([fe(J([Dt("authorizedPubkey"),re("epochOfLastAuthorizedSwitch"),re("targetEpoch")]),32,"buf"),re("idx"),$t("isEmpty")],"priorVoters"),re(),fe(J([re("epoch"),re("credits"),re("prevCredits")]),yr(tt(),-8),"epochCredits"),J([re("slot"),re("timestamp")],"lastTimestamp")]);function sh(o){return(t,e,r,a)=>t.method==="solana_chainId"?(e.result=o,a()):r()}function oh(o){return(t,e,r,a)=>t.method==="solana_provider_config"?(e.result=o,a()):r()}function fo(o){const{chainId:t}=o;return Yr([sh(t),oh(o)])}function ah(o){const{rpcTarget:t}=o,e=Oo({rpcTarget:t});return{networkMiddleware:Yr([fo(o),e]),fetchMiddleware:e}}function ch(o){let{getAccounts:t}=o;return bn(async(e,r,a)=>{const{method:i}=e;if(i!=="getAccounts")return a();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const u=await t(e);r.result=u})}function uh(o){let{requestAccounts:t}=o;return bn(async(e,r,a)=>{const{method:i}=e;if(i!=="requestAccounts")return a();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const u=await t(e);r.result=u})}function Ce(o,t){return bn(async(e,r,a)=>{const{method:i}=e;if(i!==o)return a();if(!t)throw new Error("WalletMiddleware - ".concat(o," not provided"));const u=await t(e);r.result=u})}function Ai(o){const{getAccounts:t,requestAccounts:e,signTransaction:r,signAndSendTransaction:a,signAllTransactions:i,signMessage:u,getPrivateKey:v,getSecretKey:w}=o;return Yr([uh({requestAccounts:e}),ch({getAccounts:t}),Ce("signTransaction",r),Ce("signAndSendTransaction",a),Ce("signAllTransactions",i),Ce("signMessage",u),Ce("solanaPrivateKey",v),Ce("solanaSecretKey",w)])}function hh(o){let{addNewChainConfig:t,switchSolanaChain:e}=o;return Yr([Ce("addSolanaChain",t),Ce("switchSolanaChain",e)])}function fh(o){let{updatePrivatekey:t}=o;return Yr([Ce("updateAccount",t)])}function Xi(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),e.push.apply(e,r)}return e}function Yi(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Xi(Object(e),!0).forEach(function(r){Tr(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Xi(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class Rn extends Qn{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:Yi(Yi({},e.chainConfig),{},{chainNamespace:fn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){const e=new Yn,r=this.getProviderHandlers(t),a=Ai(r);e.push(a);const i=fo(this.config.chainConfig);e.push(i);const u=this.getInjectedProviderProxy(t);u&&e.push(u);const v=ti(e);this.updateProviderEngineProxy(v),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:t}=this.config;return this.update({chainId:t.chainId}),t.chainId||""}getInjectedProviderProxy(t){}}const Ei=o=>({requestAccounts:async()=>o.publicKey?[jt.encode(o.publicKey.toBytes())]:[],getAccounts:async()=>o.publicKey?[jt.encode(o.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>await o.signTransaction(e.params.message),signMessage:async e=>(await o.signMessage(e.params.message,e.params.display)).signature,signAllTransactions:async e=>{var r,a;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((a=e.params)!==null&&a!==void 0&&a.message.length))throw zt.ethErrors.rpc.invalidParams("message");return await o.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>({signature:(await o.signAndSendTransaction(e.params.message)).signature})});function Qi(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),e.push.apply(e,r)}return e}function lh(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Qi(Object(e),!0).forEach(function(r){Tr(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Qi(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}function lo(o){return bn(async(t,e,r)=>{const a=await o.request(lh({},t));e.result=a})}class dh extends Rn{getProviderHandlers(t){return Ei(t)}getInjectedProviderProxy(t){return lo(t)}}const ph=(o,t)=>({requestAccounts:async()=>{const{data:r}=await o.connect();return[r.publicKey]},getAccounts:async()=>{const{data:r}=await o.connect();return[r.publicKey]},getPrivateKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},signTransaction:async r=>{const a=r.params.message;if(!a)throw zt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:i}=await o.signTransaction(jt.encode(a.serializeMessage()));if(!i.publicKey||!i.signature)throw new Error("Invalid signature from slope wallet");const u=new et(i.publicKey),v=jt.decode(i.signature);return a.addSignature(u,v),a},signMessage:async r=>{const a=await o.signMessage(r.params.message);return jt.decode(a.data.signature)},signAndSendTransaction:async r=>{const a=t();if(!a)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=r.params.message;if(!i)throw zt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:u}=await o.signTransaction(jt.encode(i.serializeMessage()));if(!u.publicKey||!u.signature)throw new Error("Invalid signature from slope wallet");const v=new et(u.publicKey),w=jt.decode(u.signature);i.addSignature(v,w);const M=await a.request({method:"solana_provider_config",params:[]});return{signature:await new ki(M.rpcTarget).sendRawTransaction(i.serialize())}},signAllTransactions:async r=>{var a,i,u;if(!((a=r.params)!==null&&a!==void 0&&a.message)||!((i=r.params)!==null&&i!==void 0&&i.message.length))throw zt.ethErrors.rpc.invalidParams("message");const v=r.params.message,{length:w}=v,M=[];for(let k=0;k<w;k++)M.push(jt.encode(r.params.message[k].serializeMessage()));const{msg:b,data:A}=await o.signAllTransactions(M);if(!A.publicKey||((u=A.signatures)===null||u===void 0?void 0:u.length)!==w)throw new Error(b);const L=new et(A.publicKey);for(let k=0;k<w;k++){const E=jt.decode(A.signatures[k]);v[k].addSignature(L,E)}return v}});class gh extends Rn{getProviderHandlers(t){return ph(t,this.getProviderEngineProxy.bind(this))}}const mh=(o,t)=>{const e=Ei(o);return e.signAndSendTransaction=async r=>{const a=t();if(!a)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await o.signTransaction(r.params.message),u=await a.request({method:"solana_provider_config",params:[]});return{signature:await new ki(u.rpcTarget).sendRawTransaction(i.serialize())}},e};class vh extends Rn{getProviderHandlers(t){return mh(t,this.getProviderEngineProxy.bind(this))}}const yh=(o,t)=>{const e=Ei(o);return e.signMessage=async r=>{const{signature:a}=await o.sign(r.params.message,"utf8");return a},e.signAndSendTransaction=async r=>{const a=t();if(!a)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await o.signTransaction(r.params.message),u=await a.request({method:"solana_provider_config",params:[]});return{signature:await new ki(u.rpcTarget).sendRawTransaction(i.serialize())}},e};class wh extends Rn{getProviderHandlers(t){return yh(t,this.getProviderEngineProxy.bind(this))}}const bh=o=>({requestAccounts:async()=>await o.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await o.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw zt.ethErrors.rpc.methodNotSupported()},signMessage:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw zt.ethErrors.rpc.invalidParams("message");return await o.signMessage(e.params.message)},signTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw zt.ethErrors.rpc.invalidParams("message");const a=e.params.message;return await o.signTransaction(a)},signAndSendTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw zt.ethErrors.rpc.invalidParams("message");const a=e.params.message;return{signature:await o.sendTransaction(a)}},signAllTransactions:async e=>{var r,a;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((a=e.params)!==null&&a!==void 0&&a.message.length))throw zt.ethErrors.rpc.invalidParams("message");const i=e.params.message;return await o.signAllTransactions(i)}});function ts(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),e.push.apply(e,r)}return e}function un(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ts(Object(e),!0).forEach(function(r){Tr(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):ts(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class Mh extends Qn{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:un(un({},e.chainConfig),{},{chainNamespace:fn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){this.handleInjectedProviderUpdate(t),await this.setupEngine(t)}async lookupNetwork(){if(!this.provider)throw zt.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,e=await this.provider.request({method:"solana_chainId"}),r=Bi(e.toString())?e:"0x".concat(parseInt(e,10).toString(16));if(t!==r)throw Xn.rpcConnectionError("Invalid network, net_version is: ".concat(r,", expected: ").concat(t));return this.update({chainId:r}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(t){const e=bh(t),r=Ai(e),a=lo(t),i=new Yn;i.push(r),i.push(a);const u=ti(i);this.updateProviderEngineProxy(u),await this.lookupNetwork()}async handleInjectedProviderUpdate(t){t.on("accountsChanged",async e=>{this.provider.emit("accountsChanged",e)}),t.on("chainChanged",async e=>{const r=Bi(e)?e:"0x".concat(parseInt(e,10).toString(16));this.configure({chainConfig:un(un({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(t)})}}async function xh(o){let{privKey:t,getProviderEngineProxy:e}=o;const r=()=>Vr.fromSecretKey(Buffer.from(t,"hex"));if(typeof t!="string")throw Xn.invalidParams("privKey must be a string");const a=r();return{requestAccounts:async()=>[a.publicKey.toBase58()],getAccounts:async()=>[a.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>jt.encode(a.secretKey),signTransaction:async u=>{var v;if(!((v=u.params)!==null&&v!==void 0&&v.message))throw zt.ethErrors.rpc.invalidParams("message");const w=u.params.message;return w.partialSign(a),w},signMessage:async u=>{var v;if(!((v=u.params)!==null&&v!==void 0&&v.message))throw zt.ethErrors.rpc.invalidParams("message");return No.sign.detached(u.params.message,a.secretKey)},signAndSendTransaction:async u=>{var v;if(!((v=u.params)!==null&&v!==void 0&&v.message))throw zt.ethErrors.rpc.invalidParams("message");const w=e();if(!w)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const M=u.params.message;return M.sign(a),{signature:await w.request({method:"sendTransaction",params:[jt.encode(M.serialize())]})}},signAllTransactions:async u=>{var v,w,M;if(!((v=u.params)!==null&&v!==void 0&&v.message)||!((w=u.params)!==null&&w!==void 0&&w.message.length))throw zt.ethErrors.rpc.invalidParams("message");const b=(M=u.params)===null||M===void 0?void 0:M.message;for(const A of b||[])A.partialSign(a);return b}}}function es(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),e.push.apply(e,r)}return e}function rs(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?es(Object(e),!0).forEach(function(r){Tr(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):es(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class Jn extends Qn{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:rs(rs({},e.chainConfig),{},{chainNamespace:fn.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw zt.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(t){const e=await xh({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=Ai(e),a=new Yn,{networkMiddleware:i}=ah(this.config.chainConfig);a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(r),a.push(i);const u=ti(a);this.updateProviderEngineProxy(u),await this.lookupNetwork()}async updateAccount(t){if(!this._providerEngineProxy)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==t.privateKey&&(await this.setupProvider(t.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(t){if(!this._providerEngineProxy)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=this.getChainConfig(t.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:e});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:e}=this.config;if(t!=="ok")throw Xn.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(e.rpcTarget));return this.update({chainId:e.chainId}),this.state.chainId!==e.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return hh({addNewChainConfig:async r=>{if(!r.params)throw zt.ethErrors.rpc.invalidParams("Missing request params");const{chainId:a,chainName:i,rpcUrls:u,blockExplorerUrls:v,nativeCurrency:w}=r.params;if(!a)throw zt.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!u||u.length===0)throw zt.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!w)throw zt.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:fn.SOLANA,chainId:a,ticker:(w==null?void 0:w.symbol)||"SOL",tickerName:(w==null?void 0:w.name)||"Solana",displayName:i,rpcTarget:u[0],blockExplorer:(v==null?void 0:v[0])||""})},switchSolanaChain:async r=>{if(!r.params)throw zt.ethErrors.rpc.invalidParams("Missing request params");if(!r.params.chainId)throw zt.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(r.params)}})}getAccountMiddleware(){return fh({updatePrivatekey:async e=>{if(!e.params)throw zt.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw zt.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:r}=e.params;await this.updateAccount({privateKey:r})}})}}Tr(Jn,"getProviderInstance",async o=>{const t=new Jn({config:{chainConfig:o.chainConfig}});return await t.setupProvider(o.privKey),t});class _h{constructor(t){Tr(this,"provider",void 0),this.provider=t}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(t){const{signature:e}=await this.provider.request({method:"signAndSendTransaction",params:{message:t}});return{signature:e}}async signTransaction(t){return await this.provider.request({method:"signTransaction",params:{message:t}})}async signAllTransactions(t){return await this.provider.request({method:"signAllTransactions",params:{message:t}})}async signMessage(t){return await this.provider.request({method:"signMessage",params:{message:t}})}async request(t){return await this.provider.request(t)}}const Ih=Object.freeze(Object.defineProperty({__proto__:null,PhantomInjectedProvider:dh,SlopeInjectedProxyProvider:gh,SolanaPrivateKeyProvider:Jn,SolanaWallet:_h,SolflareInjectedProvider:vh,SolletInjectedProvider:wh,TorusInjectedProvider:Mh},Symbol.toStringTag,{value:"Module"}));export{et as P,Mh as T,dh as a,Ih as s};
